<!DOCTYPE html>
<html lang="en-uk" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ÂÜôÂú®ÂâçÈù¢ ÊúÄËøë‰∏ÄÁõ¥ÈÉΩËØ¥ÊÉ≥Â≠¶JavaÂÜÖÂ≠òÈ©¨Ôºå‰ΩÜ‰πü‰∏ÄÁõ¥ÈÉΩÂÅúÂú®TomcatÂÜÖÂ≠òÈ©¨ËøôÈáåÔºåÂéüÂõ†Â∞±ÊòØÂæàÂ§öÁöÑÊïôÁ®ãÈÉΩÂª∫ËÆÆË¶ÅÊéåÊè°‰∏Ä‰∏ãTomcatÁöÑÊ°ÜÊû∂Ôºå‰ΩÜÊòØËø´‰∫é'><title>JavaSec - JavaWeb - Tomcat Ê°ÜÊû∂‰ª•Âèä‰∏éServlet‰πãÈó¥ÁöÑËÅîÁ≥ª</title>

<link rel='canonical' href='https://ginkgo.org.cn/posts/javasec_javaweb_tomcat/'>

<link rel="stylesheet" href="/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css"><meta property='og:title' content='JavaSec - JavaWeb - Tomcat Ê°ÜÊû∂‰ª•Âèä‰∏éServlet‰πãÈó¥ÁöÑËÅîÁ≥ª'>
<meta property='og:description' content='ÂÜôÂú®ÂâçÈù¢ ÊúÄËøë‰∏ÄÁõ¥ÈÉΩËØ¥ÊÉ≥Â≠¶JavaÂÜÖÂ≠òÈ©¨Ôºå‰ΩÜ‰πü‰∏ÄÁõ¥ÈÉΩÂÅúÂú®TomcatÂÜÖÂ≠òÈ©¨ËøôÈáåÔºåÂéüÂõ†Â∞±ÊòØÂæàÂ§öÁöÑÊïôÁ®ãÈÉΩÂª∫ËÆÆË¶ÅÊéåÊè°‰∏Ä‰∏ãTomcatÁöÑÊ°ÜÊû∂Ôºå‰ΩÜÊòØËø´‰∫é'>
<meta property='og:url' content='https://ginkgo.org.cn/posts/javasec_javaweb_tomcat/'>
<meta property='og:site_name' content='Under The Ginkgo'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='tomcat' /><meta property='article:tag' content='servlet' /><meta property='article:tag' content='JavaEE' /><meta property='article:published_time' content='2022-10-20T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-11-01T18:17:41&#43;08:00'/>
<meta name="twitter:title" content="JavaSec - JavaWeb - Tomcat Ê°ÜÊû∂‰ª•Âèä‰∏éServlet‰πãÈó¥ÁöÑËÅîÁ≥ª">
<meta name="twitter:description" content="ÂÜôÂú®ÂâçÈù¢ ÊúÄËøë‰∏ÄÁõ¥ÈÉΩËØ¥ÊÉ≥Â≠¶JavaÂÜÖÂ≠òÈ©¨Ôºå‰ΩÜ‰πü‰∏ÄÁõ¥ÈÉΩÂÅúÂú®TomcatÂÜÖÂ≠òÈ©¨ËøôÈáåÔºåÂéüÂõ†Â∞±ÊòØÂæàÂ§öÁöÑÊïôÁ®ãÈÉΩÂª∫ËÆÆË¶ÅÊéåÊè°‰∏Ä‰∏ãTomcatÁöÑÊ°ÜÊû∂Ôºå‰ΩÜÊòØËø´‰∫é">
    <link rel="shortcut icon" href="/img/favicon.ico" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZKEXSTS2N4"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-ZKEXSTS2N4', { 'anonymize_ip': false });
}
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/Ginkgo_hu5438825b9b6d1014226d20d231e650c2_69187_300x0_resize_q75_box.JPG" width="300"
                            height="237" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üßê</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Under The Ginkgo</a></h1>
            <h2 class="site-description">BOYS FIGHT FOR YOUR LIBERTY</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/medic0803'
                        target="_blank"
                        title="A_GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:medicwrf@gmail.com'
                        target="_blank"
                        title="B_E-mail"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1647773061437" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2742" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M937.593333 257.073333A148.353333 148.353333 0 0 0 832 213.333333H384v-42.666666h85.333333a85.333333 85.333333 0 0 0 0-170.666667H362.666667a21.333333 21.333333 0 0 0-21.333334 21.333333v192H212.26A53.426667 53.426667 0 0 0 160 170.666667h-64a53.393333 53.393333 0 0 0-53.333333 53.333333v533.333333a53.393333 53.393333 0 0 0 53.333333 53.333334h64a53.426667 53.426667 0 0 0 52.26-42.666667H384v192a21.333333 21.333333 0 0 0 21.333333 21.333333h170.666667a21.333333 21.333333 0 0 0 21.333333-21.333333v-192h362.666667a21.333333 21.333333 0 0 0 21.333333-21.333333V362.666667a148.353333 148.353333 0 0 0-43.74-105.593334zM512 85.333333a42.713333 42.713333 0 0 1-42.666667 42.666667H384V42.666667h85.333333a42.713333 42.713333 0 0 1 42.666667 42.666666zM170.666667 757.333333a10.666667 10.666667 0 0 1-10.666667 10.666667h-64a10.666667 10.666667 0 0 1-10.666667-10.666667V224a10.666667 10.666667 0 0 1 10.666667-10.666667h64a10.666667 10.666667 0 0 1 10.666667 10.666667z m384 181.333334H426.666667v-170.666667h128z m384-213.333334H213.333333V256h128v149.333333a21.333333 21.333333 0 0 0 21.333334 21.333334h85.333333a21.333333 21.333333 0 0 0 0-42.666667h-64V256h448c58.813333 0 106.666667 47.853333 106.666667 106.666667z" fill="#bababa" p-id="2743"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/web/" >
                web
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/javasec_javaweb_tomcat/">JavaSec - JavaWeb - Tomcat Ê°ÜÊû∂‰ª•Âèä‰∏éServlet‰πãÈó¥ÁöÑËÅîÁ≥ª</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 20, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    28 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="ÂÜôÂú®ÂâçÈù¢">ÂÜôÂú®ÂâçÈù¢</h2>
<p>ÊúÄËøë‰∏ÄÁõ¥ÈÉΩËØ¥ÊÉ≥Â≠¶JavaÂÜÖÂ≠òÈ©¨Ôºå‰ΩÜ‰πü‰∏ÄÁõ¥ÈÉΩÂÅúÂú®TomcatÂÜÖÂ≠òÈ©¨ËøôÈáåÔºåÂéüÂõ†Â∞±ÊòØÂæàÂ§öÁöÑÊïôÁ®ãÈÉΩÂª∫ËÆÆË¶ÅÊéåÊè°‰∏Ä‰∏ãTomcatÁöÑÊ°ÜÊû∂Ôºå‰ΩÜÊòØËø´‰∫é‰∏ÄÁõ¥ÈÉΩÊ≤°ÊúâÊâæÂà∞Â•ΩÁöÑÊïôÁ®ãÂíåÊñáÁ´†Êù•ÁúãÔºåÂ¶ÇÊûúÂè™ÊòØÂçïÁ∫ØÂú∞ÁªôÊØè‰∏™Ê®°Âùó‰∏ã‰∏Ä‰∏™ÂÆö‰πâÔºåÊÑüËßâÂæàÈöæËØ¥ÊúçËá™Â∑±ÊáÇ‰∫Ü„ÄÇ <!-- raw HTML omitted --></p>
<p>ËôΩÁÑ∂ÂæàÊÉ≥‰ªéÂ§¥Áúã‰∏ÄÈÅç„ÄäHow Tomcat Works„Äã‰ΩÜÊòØÁ°ÆÂÆû‰πü‰∏çÁé∞ÂÆûÔºåÂÅ∂ÁÑ∂‰∏Ä‰∏™Êú∫‰ºöÈúÄË¶ÅÊâæ‰∏Ä‰∏ãTomcatÁöÑ <code>server.xml</code> ÈÖçÁΩÆÊñá‰ª∂Êù•Áúã‰∏Ä‰∏ãÔºåÂèàÁ¢∞Â∑ßÊâæÂà∞‰∫Ü‰∏ÄÁØáËß£ËØª <code>server.xml</code> ÁöÑÊñáÁ´†Ôºå‰∫éÊòØÂ∞±Êúâ‰∫ÜËøôÁØáÊñáÁ´†ÊàñËÄÖËØ¥Â≠¶‰π†Á¨îËÆ∞„ÄÇ <!-- raw HTML omitted --></p>
<p>Âú®Êú¨Êñá‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π†‰ª•‰∏ãÂÜÖÂÆπÔºö <!-- raw HTML omitted --></p>
<ol>
<li>ÈÄöËøáËß£ËØª‰∏Ä‰∏™Âü∫Á°ÄÁöÑTomcat <strong>server.xml</strong> ÈÖçÁΩÆÊñá‰ª∂Ôºå‰∫ÜËß£Tomcat‰∏ãÈù¢ÁöÑÁªÑ‰ª∂ÊòØÂ¶Ç‰ΩïÂàÜÂ∑•Â§ÑÁêÜ‰∏Ä‰∏™HTTPËØ∑Ê±ÇÁöÑÔºõ <!-- raw HTML omitted --></li>
<li>ËøõËÄå‰∫ÜËß£Tomcat‰∏ãÂêÑ‰∏™ÁªÑ‰ª∂ÁöÑ‰ΩúÁî®Ôºå‰ª•ÂèäÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºõ <!-- raw HTML omitted --></li>
<li>ÈÄöËøáTomcat‰ª•ÂèäJava EEÊ∫êÁ†ÅÊù•‰∫ÜËß£‰∏Ä‰∏ãTomcatÊòØÂ¶Ç‰Ωï‰∏éJava EE‰∏≠ÁöÑ‰∏âÂ§ßÁªÑ‰ª∂ÔºàServletÔºåFilterÔºåListenerÔºâÊòØÂ¶Ç‰ΩïÂÖ≥ËÅîËµ∑Êù•ÁöÑÔºõ <!-- raw HTML omitted --></li>
<li>ÊúÄÂêéÈÄöËøá‰∫ÜËß£Tomcat Pipeline-ValveË¥£‰ªªÈìæÊú∫Âà∂‰∫ÜËß£Tomcat‰∏éJava WebÂÖ∑‰ΩìÂú®‰ª£Á†Å‰∏≠ÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜ‰∏Ä‰∏™HTTPËØ∑Ê±ÇÁöÑÔºõ <!-- raw HTML omitted --></li>
</ol>
<p>Â¶ÇÊûúÂØπ‰∫éJava Web‰∏≠‰∏âÂ§ßÁªÑ‰ª∂ÊúâÁñëÈóÆÁöÑËØùÔºåÂèØ‰ª•ÁúãÁúãÊàëÊÄªÁªìÁöÑÂÜÖÂÆπÔºö <!-- raw HTML omitted -->
<a class="link" href="https://ginkgo.org.cn/posts/javasec_javaweb_servlet/"  target="_blank" rel="noopener"
    >JavaSec - Java Web - ‰∏âÂ§ßÊ†∏ÂøÉÁªÑ‰ª∂ - Servlet</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://ginkgo.org.cn/posts/javasec_javaweb_listener_and_filter/"  target="_blank" rel="noopener"
    >JavaSec - Java Web - ‰∏âÂ§ßÊ†∏ÂøÉÁªÑ‰ª∂ - Listener &amp; Filter</a> <!-- raw HTML omitted --></p>
<h2 id="tomcatÂü∫Á°ÄÊ°ÜÊû∂">TomcatÂü∫Á°ÄÊ°ÜÊû∂</h2>
<p>Tomcat‰Ωú‰∏∫‰∏Ä‰∏™WebÂ∫îÁî®ÊúçÂä°Âô®ÔºåÂÖ∂ÊúÄÊ†∏ÂøÉÁöÑÂäüËÉΩËá™ÁÑ∂Â∞±ÊòØÔºö <!-- raw HTML omitted --></p>
<ol>
<li>Êé•ÂèóÊù•Ëá™Áî®Êà∑ÁöÑHTTP requestËØ∑Ê±Ç; <!-- raw HTML omitted --></li>
<li>Ê†πÊçÆÁî®Êà∑ÁöÑHTTPËØ∑Ê±ÇËøõË°å‰∏öÂä°Â§ÑÁêÜÔºõ <!-- raw HTML omitted --></li>
<li>ÊúÄÂêéËøîÂõûResponseÂìçÂ∫îÁªôÁî®Êà∑Ôºõ <!-- raw HTML omitted --></li>
</ol>
<p>Âú®Êé•‰∏ãÊù•ÁöÑÊñáÁ´†‰∏≠ÔºåËÆ∞‰ΩèËøô‰∏™ÊúÄÂü∫Êú¨ÁöÑÂäüËÉΩÂèØ‰ª•ËÆ©Êàë‰ª¨Êõ¥Â•ΩÁöÑÁêÜËß£TomcatÂà∞Â∫ïÊòØÊÄé‰πàÊù•ÂØπHTTPËØ∑Ê±ÇËøõË°åÂ§ÑÁêÜÁöÑ„ÄÇ <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-09-28_11-31-48_screenshot.png"
         alt="Figure 1: TomcatÊ°ÜÊû∂" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 1: <!-- raw HTML omitted -->TomcatÊ°ÜÊû∂</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨ÂÖàÊù•Ê†πÊçÆ‰∏äÂõæÁúã‰∏Ä‰∏ãÊúÄÁÆÄÂçïÁöÑTomcat serverÊ°ÜÊû∂ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÂæàÂ§öÈôåÁîüÁöÑÊäΩË±°ÂêçËØçÔºåÂ§ßÂÆ∂‰∏çË¶ÅÁùÄÊÄ•ÔºåÂêéÈù¢Êàë‰ª¨‰ºöÂÖ∑‰ΩìÂ±ïÂºÄÊù•ËÆ≤Ôºö <!-- raw HTML omitted --></p>
<ol>
<li>‰∏Ä‰∏™TomcatÊúçÂä°Âô®ÂåÖÂê´Â§ö‰∏™Service; <!-- raw HTML omitted --></li>
<li>‰∏Ä‰∏™ServiceÂèØ‰ª•ÁªëÂÆö <strong>Â§ö‰∏™</strong> ConnectorÔºåÂπ∂ÂêåÊó∂‰∏é <strong>ÂîØ‰∏Ä</strong> ‰∏Ä‰∏™ContainerÁªëÂÆö; <!-- raw HTML omitted --></li>
<li><strong>Connector</strong> Ë¥üË¥£Â§ÑÁêÜÁî±ÂÆ¢Êà∑Á´ØÂèëÂá∫ÁöÑHTTPËØ∑Ê±ÇÔºåÂπ∂Â∞ÅË£ÖÊàêServletRequestÂØπË±°ÂèëÈÄÅÁªôContainerËøõË°åÂ§ÑÁêÜ; <!-- raw HTML omitted --></li>
<li><strong>Container</strong> Ë¥üË¥£ÂØπÊî∂Âà∞ÁöÑËØ∑Ê±ÇÔºàServletRequestÂØπË±°ÔºâËøõË°åÂ§ÑÁêÜÔºåÂπ∂Â∞ÜÂìçÂ∫îResponseÂ∞ÅË£ÖÊàêServletResponseÂØπË±°ÂèëÂõûConnector; <!-- raw HTML omitted --></li>
<li>ÊúÄÂêéÁî±ConnectorÂèëÈÄÅHTTPÂìçÂ∫îËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåËá≥Ê≠§ÂÆåÊàê‰∏ÄÊ¨°HTTPËØ∑Ê±Ç‰∏éÂìçÂ∫î„ÄÇ <!-- raw HTML omitted --></li>
</ol>
<h2 id="‰ªétomcatÈÖçÁΩÆÊñá‰ª∂server-dot-xml‰∫ÜËß£tomcat">‰ªéTomcatÈÖçÁΩÆÊñá‰ª∂server.xml‰∫ÜËß£Tomcat</h2>
<p>server.xmlÊòØTomcatÊúçÂä°Âô®ÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÂÖ∂‰∏≠ÁöÑÊØè‰∏Ä‰∏™xmlÂÖÉÁ¥†ÈÉΩ‰ª£Ë°®‰∫Ütomcat‰∏≠ÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåËøô‰∫õÁªÑ‰ª∂ÈÉΩÂú®Â§ÑÁêÜËØ∑Ê±Ç‰∏≠Êã•ÊúâËá™Â∑±ÁöÑËÅåË¥£ÔºåÊàë‰ª¨ÈÄöËøáÂØπÈÖçÁΩÆÊñá‰ª∂ÁöÑËß£ËØªÂ≠¶‰π†ÔºåÂèØ‰ª•Â§ßËá¥‰∫ÜËß£TomcatÊúçÂä°Âô®ÁöÑÊï¥‰ΩìÊû∂ÊûÑÁªÑÊàêÔºåÊúâÂä©‰∫éÊàë‰ª¨Ëøõ‰∏ÄÊ≠•ÁöÑÊ∫êÁ†ÅÈòÖËØªÔºõ <!-- raw HTML omitted --></p>
<p>TomcatÁöÑÈÖçÁΩÆÊñá‰ª∂server.xmlÁöÑÊï¥‰ΩìÁªìÊûÑÂ¶Ç‰∏ãÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Server&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;Service&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;Connector</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;Connector</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;Engine&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;Host&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Context</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/Host&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/Engine&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/Service&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Server&gt;</span>
</span></span></code></pre></div><p>Êé•‰∏ãÊù•Êàë‰ª¨ËÆ≤‰∏Ä‰∏™‰∏™ÂÖÉÁ¥†Êù•ËøõË°åÁêÜËß£ÔºåÂπ∂‰∫ÜËß£Ëøô‰∫õÂÖÉÁ¥†ÊâÄÈÖçÁΩÆÁöÑTomcatÁªÑ‰ª∂ÁöÑÂäüËÉΩÔºõ <!-- raw HTML omitted --></p>
<h2 id="server">Server</h2>
<p>&lt;Server&gt;ÂÖÉÁ¥†ÊòØÈÖçÁΩÆÊñá‰ª∂ÁöÑÊ†πÂÖÉÁ¥†ÔºåÁî®Êù•‰ª£Ë°®ÁùÄÊàë‰ª¨Êï¥‰∏Ä‰∏™TomcatÊúçÂä°Âô®Ôºõ <!-- raw HTML omitted --></p>
<p>Ê†πÊçÆ‰∏äÈù¢ÁöÑÊ°ÜÊû∂ÂõæÊàë‰ª¨Áü•ÈÅìÔºå‰∏Ä‰∏™Tomcat ServerÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™ServiceÔºåËÄåServerÁöÑ‰∏ªË¶Å‰ªªÂä°ÔºåÂ∞±ÊòØ‰∏∫ÂÆ¢Êà∑Á´ØÊèê‰æõ‰∫Ü‰∏Ä‰∏™ËÉΩÂ§üËÆøÈóÆÊâÄÊúâËøô‰∫õServiceÁöÑÊé•Âè£ÔºåÂêåÊó∂Áª¥Êä§ÊâÄÊúâServiceÁöÑÁîüÂëΩÂë®ÊúüÔºåÂåÖÊã¨Â¶Ç‰ΩïÊâæÂà∞ÂÆ¢Êà∑Á´ØÊÉ≥Ë¶ÅËÆøÈóÆÁöÑServiceÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Server</span> <span class="na">port=</span><span class="s">&#34;8005&#34;</span> <span class="na">shutdown=</span><span class="s">&#34;SHUTDOWN&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Server&gt;</span>
</span></span></code></pre></div><p>‰∏äÈù¢ÁöÑËøô‰∏™ÂÆû‰æãÂåÖÂê´‰∫Ü‰∏§‰∏™Â±ûÊÄßÔºåport‰ª•ÂèäshutdownÔºåËøô‰∏§‰∏™Â±ûÊÄßÁªÑÂêàÂú®‰∏ÄËµ∑Ë°®Á§∫ÔºåÂΩìÊàë‰ª¨Âêë8005Á´ØÂè£ÂèëÈÄÅ&quot;SHUTDOWN&quot;Ëøô‰∏™‰ø°ÊÅØÊó∂ÔºåÊúçÂä°Âô®Â∞±‰ºöÂÖ≥Èó≠ÔºàÂΩìshutdownÁöÑÂ±ûÊÄßËÆæ‰∏∫-1Êó∂Â∞±ÂèØ‰ª•Á¶ÅÁî®Ëøô‰∏™ÂäüËÉΩÔºâ <!-- raw HTML omitted --></p>
<p>Â¶ÇÊûúÂ§ßÂÆ∂Áî®ËøáncÊàñËÄÖncatÁöÑËØùÔºåÂ∞±‰∏çÈöæÊÉ≥Âà∞Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ncÊù•ÂàõÂª∫‰∏Ä‰∏™client socketÂéªËøûÊé•8005Á´ØÂè£Âπ∂ÂèëÂá∫Êåá‰ª§ÂÖ≥Èó≠Á´ØÂè£Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nc localhost <span class="m">8005</span>
</span></span><span class="line"><span class="cl">SHUTDOWN
</span></span></code></pre></div><h2 id="service">Service</h2>
<p>TomcatÊ°ÜÊû∂‰∏≠ÁöÑËøô‰∏™ServiceÔºåÊàëËÆ§‰∏∫ÊòØÂíåÊàë‰ª¨‰º†ÁªüÊÑè‰πâ‰∏äÁöÑServiceÊòØ‰∏Ä‰∏™Ê¶ÇÂøµÔºåÂç≥ÁõëÂê¨‰∏Ä‰∏™Á´ØÂè£Ôºå‰∏éÂÆ¢Êà∑Á´ØÂª∫Á´ãËøûÊé•Êù•ËøõË°åÈÄö‰ø°‰∫§‰∫íÔºõ <!-- raw HTML omitted --></p>
<p>‰∏ÄËà¨Êù•ËØ¥ÔºåÈªòËÆ§Âè™ÂºÄÂêØ‰∏Ä‰∏™ÂêçÂè´CatalinaÁöÑServiceÔºå‰πüÂ∞±ÊòØÊúÄÊ†∏ÂøÉÁöÑWebÂÆπÂô®ÔºåÂΩìÁÑ∂Tomcat‰πüÂèØ‰ª•Êèê‰æõÂ§ö‰∏™ServiceÔºå‰ΩÜÊòØ‰∏ÄËà¨Êù•ËØ¥Áî®‰∏ç‰∏äÔºåÊàë‰ª¨Âè™Ë¶ÅÁü•ÈÅìÊ†πÊçÆnameÂ±ûÊÄßÔºåCatalinaÂ∞±ÊòØTomcat server‰∏ãÈù¢ÁöÑ‰∏Ä‰∏™ServiceÂ∞±ÂèØ‰ª•‰∫ÜÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Service</span> <span class="na">name=</span><span class="s">&#34;Catalina&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">&#34;8080&#34;</span> <span class="na">protocol=</span><span class="s">&#34;HTTP/1.1&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">connectionTimeout=</span><span class="s">&#34;20000&#34;</span>
</span></span><span class="line"><span class="cl">               <span class="na">redirectPort=</span><span class="s">&#34;8443&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;Engine</span> <span class="na">name=</span><span class="s">&#34;Catalina&#34;</span> <span class="na">defaultHost=</span><span class="s">&#34;localhost&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">&#34;localhost&#34;</span>  <span class="na">appBase=</span><span class="s">&#34;webapps&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">unpackWARs=</span><span class="s">&#34;true&#34;</span> <span class="na">autoDeploy=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/Host&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/Engine&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Service&gt;</span>
</span></span></code></pre></div><h2 id="connector">Connector</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">&#34;8080&#34;</span> <span class="na">protocol=</span><span class="s">&#34;HTTP/1.1&#34;</span>
</span></span><span class="line"><span class="cl">             <span class="na">connectionTimeout=</span><span class="s">&#34;20000&#34;</span>
</span></span><span class="line"><span class="cl">             <span class="na">redirectPort=</span><span class="s">&#34;8443&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">&#34;8009&#34;</span> <span class="na">protocol=</span><span class="s">&#34;AJP/1.3&#34;</span> <span class="na">redirectPort=</span><span class="s">&#34;8443&#34;</span> <span class="nt">/&gt;</span>
</span></span></code></pre></div><p>Êàë‰ª¨‰πãÂâçÊèêÂà∞ËøáServiceÂåÖÂê´Â§ö‰∏™ConnectorÂíåÂîØ‰∏ÄÁöÑContainerÔºåÊàë‰ª¨Âú®‰∏äÈù¢ÁöÑÈÖçÁΩÆ‰∏≠ÔºåÂèëÁé∞‰∫Ü‰∏§‰∏™ConnectorÂÖÉÁ¥†ÁõëÂê¨‰∫Ü‰∏çÂêåÁöÑÁ´ØÂè£ÔºåÂèØËøôÂ∞±ËÆ©ServiceÁöÑÊ¶ÇÂøµ‰∏çÊòØ‰∏çÂêå‰∫ÜÂêóÔºü <!-- raw HTML omitted --></p>
<p>ÂÖ∂ÂÆû‰ªîÁªÜÁúãÔºåÂèØ‰ª•ÂèëÁé∞‰∏§‰∏™ConnectorÈÉΩ‰ΩøÁî®‰∫Ü‰∏çÂêåÁöÑÂçèËÆÆÔºåHTTP/1.1 ‰ª•Âèä AJP/1.3Ôºõ <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨Êé•ÁùÄÁúãÁúãÂÖÉÁ¥†ÂÜÖÁöÑÂ±ûÊÄßÔºåportÔºåprotocolÂ∞±ÊòØConnectorÊâÄÁõëÂê¨ÁöÑÁ´ØÂè£ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ËøôÈáå‰ΩøÁî®‰∫Ü8080ÔºåËÄå‰∏çÊòØ‰º†ÁªüÁöÑ80Á´ØÂè£ÔºåËøôÊòØÂõ†‰∏∫Ôºö <!-- raw HTML omitted --></p>
<blockquote>
<p>‚ÄúÂú®Ê≠£ÂºèÁöÑÁîü‰∫ßÁéØÂ¢É‰∏≠ÔºåTomcat‰πüÂ∏∏Â∏∏ÁõëÂê¨8080Á´ØÂè£ÔºåËÄå‰∏çÊòØ80Á´ØÂè£„ÄÇËøôÊòØÂõ†‰∏∫Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåÂæàÂ∞ëÂ∞ÜTomcatÁõ¥Êé•ÂØπÂ§ñÂºÄÊîæÊé•Êî∂ËØ∑Ê±ÇÔºåËÄåÊòØÂú®TomcatÂíåÂÆ¢Êà∑Á´Ø‰πãÈó¥Âä†‰∏ÄÂ±Ç‰ª£ÁêÜÊúçÂä°Âô®(Â¶Çnginx)ÔºåÁî®‰∫éËØ∑Ê±ÇÁöÑËΩ¨Âèë„ÄÅË¥üËΩΩÂùáË°°„ÄÅÂ§ÑÁêÜÈùôÊÄÅÊñá‰ª∂Á≠âÔºõÈÄöËøá‰ª£ÁêÜÊúçÂä°Âô®ËÆøÈóÆTomcatÊó∂ÔºåÊòØÂú®Â±ÄÂüüÁΩë‰∏≠ÔºåÂõ†Ê≠§‰∏ÄËà¨‰ªç‰ΩøÁî®8080Á´ØÂè£„ÄÇ‚Äù <!-- raw HTML omitted --></p>
</blockquote>
<p>ËÄåÈÖçÁΩÆ‰∫ÜÁ¨¨‰∫å‰∏™AJPÂçèËÆÆÁöÑConnectorËøûÊé•Âô®ÊòØÂõ†‰∏∫Tomcat‰Ωú‰∏∫ServletÂÆπÂô®ÔºåÂØπ‰∫éÈùôÊÄÅËµÑÊ∫êÂ§ÑÁêÜÈÄüÂ∫¶Áõ∏ÂØπËæÉÊÖ¢ÔºåÂõ†Ê≠§ÂèØ‰ª•Áî®AJPÂçèËÆÆ‰∏éApacheÁ≠âÊúçÂä°Âô®ËøûÊé•ÔºåËÆ©ApacheÁ≠âÊúçÂä°Âô®Êù•Â§ÑÁêÜÈùôÊÄÅËµÑÊ∫êÔºõ <!-- raw HTML omitted --></p>
<dl>
<dt>ÈùôÊÄÅËµÑÊ∫ê</dt>
<dd><ul>
<li>ÈùôÊÄÅËµÑÊ∫êÂ∞±ÊòØÊúçÂä°Âô®‰∏çÈúÄË¶ÅÁªèËøá‰ªª‰ΩïÂ§ÑÁêÜÂ∞±ÂèØ‰ª•Áõ¥Êé•ËøîÂõûÁªôÁî®Êà∑ÁöÑÂÜÖÂÆπÔºå‰æãÂ¶ÇHTMLÈ°µÈù¢ÔºåFlashÔºåJavaScriptÂõæÁâáÁ≠âÂÜÖÂÆπÔºõ <!-- raw HTML omitted --></li>
<li>Áõ∏ÂØπÁöÑÔºåÂä®ÊÄÅËµÑÊ∫êÂ∞±ÊòØ‰æãÂ¶ÇASP„ÄÅPHP„ÄÅJSPÁ≠âÊñá‰ª∂ÔºåÈúÄË¶ÅÁªèËøáÊúçÂä°Âô®Â§ÑÁêÜ‰πãÂêéÔºåÁÑ∂ÂêéÂÜçËøîÂõûÁªôÁî®Êà∑Ôºõ <!-- raw HTML omitted --></li>
</ul>
</dd>
<dt>‰∏∫‰ªÄ‰πàÊàë‰ª¨Ë¶ÅÁî®ApacheÁ≠âHTTPÊúçÂä°Âô®Êù•Â§ÑÁêÜÈùôÊÄÅËµÑÊ∫êÔºü</dt>
<dd><ul>
<li>Êàë‰ª¨Áü•ÈÅìTomcat‰ºö‰ΩøÁî®ConnectorËøûÊé•Âô®ÂØπÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑHTTPËØ∑Ê±ÇËøõË°åËß£ÊûêÔºåÁÑ∂ÂêéËΩ¨Êç¢ÊàêRequest‰ª•ÂèäResponseÂØπË±°ËøõË°åÂ§ÑÁêÜ‰πãÂêéÂÜçËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºõ <!-- raw HTML omitted --></li>
<li>‰ΩÜÂ¶ÇÊûúÊòØÈùôÊÄÅËµÑÊ∫êÔºåÊ†πÊú¨‰∏çÈúÄË¶ÅÊúçÂä°Âô®ËøõË°å‰ªª‰ΩïÂ§ÑÁêÜÔºåÂ¶ÇÊûúÊØèÊ¨°Á¢∞Âà∞ÈùôÊÄÅËµÑÊ∫êÔºå‰æãÂ¶ÇÂõæÁâáÂïäÔºåJSËøôÊ†∑ÁöÑËµÑÊ∫êÂ¶ÇÊûúËøòÈóÆTomcatÊù•Ë¶ÅÔºåÈÇ£Â∞±‰ºöÊµ™Ë¥πÊó∂Èó¥Âú®ÂØπ‰∫éÊâÄÊúâËøô‰∫õHTTPËØ∑Ê±ÇÁöÑÊó†Áî®ÁöÑËß£ÊûêÂíåÊûÑÈÄ†ÂØπË±°‰∏ä‰∫ÜÔºõ <!-- raw HTML omitted --></li>
<li>ËÄåAJP(Apache JServ Protocol) ÊòØ‰∏Ä‰∏™‰∫åËøõÂà∂ÁöÑÂçèËÆÆÔºåÂπ∂‰∏î‰∏éTomcatÊúçÂä°Âô®Âª∫Á´ã‰∏Ä‰∏™Ê∞∏‰πÖÁöÑËøûÊé•ÔºåËøô‰∏§ÁÇπÈÉΩÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÈÄö‰ø°ÁöÑÊïàÁéá; <!-- raw HTML omitted --></li>
</ul>
</dd>
</dl>
<blockquote>
<p><figure><img src="/ox-hugo/2022-10-21_09-09-22_screenshot.png"
         alt="Figure 2: Tomcat‰∏éApacheÈõÜÊàê" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 2: <!-- raw HTML omitted -->Tomcat‰∏éApacheÈõÜÊàê</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
</blockquote>
<p>ÊÄªÁªì‰∏Ä‰∏ãÔºåConnectorÁöÑ‰∏ªË¶ÅÂäüËÉΩÂ∞±ÊòØÊèê‰æõ‰∏Ä‰∏™Êé•Âè£ÔºåÊù•Êé•Êî∂ÊâÄÊúâÊù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑHTTPËØ∑Ê±ÇÔºåÂπ∂Â∞ÜHTTP Request‰ª•ÂèäResponseÂ∞ÅË£ÖÊàêServletRequestÂØπË±°ÂèëÈÄÅÁªôContainerËøõË°åÂ§ÑÁêÜ; <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨Âú®ÂºÄÂ§¥ËØ¥ËøáÔºåÊàë‰ª¨Ë¶ÅÂÖ≥Ê≥®TomcatÊú¨Ë¥®‰∏äÊòØÊù•Â§ÑÁêÜÂÆ¢Êà∑Á´Ø‰º†Êù•ÁöÑHTTPËØ∑Ê±ÇÔºåÊàë‰ª¨Êé•‰∏ãÊù•Â∞±Êãø‰∏Ä‰∏™‰æãÂ≠êÊù•ÂÖ∑‰Ωì‰ªãÁªçÔºö <!-- raw HTML omitted --></p>
<p>URLÔºö <!-- raw HTML omitted --></p>
<blockquote>
<p><a class="link" href="http://localhost:8080/LearnFilter_war/admin/a.jsp"  target="_blank" rel="noopener"
    >http://localhost:8080/LearnFilter_war/admin/a.jsp</a> <!-- raw HTML omitted --></p>
</blockquote>
<p>HTTPËØ∑Ê±ÇÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="nf">GET</span> <span class="nn">/LearnFilter_war/admin/a.jsp</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</span></span><span class="line"><span class="cl"><span class="n">Host</span><span class="o">:</span> <span class="l">localhost:8080</span>
</span></span><span class="line"><span class="cl"><span class="n">User-Agent</span><span class="o">:</span> <span class="l">Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:107.0) Gecko/20100101 Firefox/107.0</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept</span><span class="o">:</span> <span class="l">text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept-Language</span><span class="o">:</span> <span class="l">en-US,en;q=0.5</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip, deflate</span>
</span></span><span class="line"><span class="cl"><span class="n">DNT</span><span class="o">:</span> <span class="l">1</span>
</span></span><span class="line"><span class="cl"><span class="n">Connection</span><span class="o">:</span> <span class="l">close</span>
</span></span><span class="line"><span class="cl"><span class="n">Upgrade-Insecure-Requests</span><span class="o">:</span> <span class="l">1</span>
</span></span><span class="line"><span class="cl"><span class="n">Sec-Fetch-Dest</span><span class="o">:</span> <span class="l">document</span>
</span></span><span class="line"><span class="cl"><span class="n">Sec-Fetch-Mode</span><span class="o">:</span> <span class="l">navigate</span>
</span></span><span class="line"><span class="cl"><span class="n">Sec-Fetch-Site</span><span class="o">:</span> <span class="l">none</span>
</span></span><span class="line"><span class="cl"><span class="n">Sec-Fetch-User</span><span class="o">:</span> <span class="l">?1</span>
</span></span></code></pre></div><p>Áõ¥Âà∞ConnectorËøõË°åÂ§ÑÁêÜÔºåÊàë‰ª¨ÁöÑËØ∑Ê±ÇÈ¶ñÂÖàÂ∑≤ÁªèÁªèÂéÜËøô‰∫õÂ§ÑÁêÜÔºàÊöÇÊó∂‰∏çËÄÉËôënginxÂèçÂêë‰ª£ÁêÜÔºâÔºö <!-- raw HTML omitted --></p>
<ol>
<li>localhostÁªèËøá‰∫ÜÊú¨Êú∫ÈªòËÆ§ÁöÑDNSÊúçÂä°Âô®ÔºåË¢´Ëß£ÊûêÊàê‰∫Ü127.0.0.1ÔºåÁÑ∂ÂêéÂª∫Á´ã‰∫Ü‰∏Ä‰∏™client socketÂπ∂Â∞ùËØï‰∏éÊúçÂä°Âô®ÁöÑ8080Á´ØÂè£Âª∫Á´ãËøûÊé•Ôºõ <!-- raw HTML omitted --></li>
<li>TomcatÁöÑHTTP ConnectorËøûÊé•Âô®Êé•Êî∂Âà∞‰∫ÜHTTPËØ∑Ê±ÇÔºåÂπ∂Â∞ÜËØ∑Ê±ÇËΩ¨Êç¢‰∏∫ServletRequest‰ª•ÂèäÂØπÂ∫îÁöÑServletResponseÂØπË±°‰º†ÈÄíÁªôContainer„ÄÇ <!-- raw HTML omitted --></li>
</ol>
<h2 id="container">Container</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Engine</span> <span class="na">name=</span><span class="s">&#34;Catalina&#34;</span> <span class="na">defaultHost=</span><span class="s">&#34;localhost&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">&#34;localhost&#34;</span>  <span class="na">appBase=</span><span class="s">&#34;webapps&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">unpackWARs=</span><span class="s">&#34;true&#34;</span> <span class="na">autoDeploy=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/Host&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Engine&gt;</span>
</span></span></code></pre></div><p>Container? Ë∞ÅÊòØContainerÔºüÂì™ÈáåÊúâContainerÔºåÈÖçÁΩÆÊñá‰ª∂ÈáåÊ≤°ÁúãÂà∞ÂïäÔºü <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨‰πãÂâç‰ªãÁªçÁöÑContainerÂÆπÂô®ÂÖ∂ÂÆûÈÉΩÊòØ‰∏Ä‰∏™ÊäΩË±°ÁöÑÊ¶ÇÂøµÔºåÂÖ∂ÂÆûÁúüÊ≠£Âú®‰ΩøÁî®ÁöÑÈÉΩÊòØÁªßÊâø‰∫ÜContainerÊé•Âè£ÁöÑÊâÄÊúâÂ≠êÁ±ªÔºåÂåÖÊã¨EngineÔºåHostÔºåContext‰ª•ÂèäWrapperÔºõ <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-09-28_11-59-42_screenshot.png"
         alt="Figure 3: Container Á±ªÂ±ÇÊ¨°" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 3: <!-- raw HTML omitted -->Container Á±ªÂ±ÇÊ¨°</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p>Êé•‰∏ãÊù•Êàë‰ª¨‰ºö‰æùÊ¨°‰ªãÁªç‰ªñ‰ª¨ÁöÑ‰ΩúÁî®Ôºå‰∏çËøáÂ∞±Âíå‰πãÂâç‰ªãÁªçÁöÑÈÇ£Ê†∑ÔºåÊï¥‰∏Ä‰∏™ContainerÊ®°ÂùóÁöÑÂäüËÉΩÂ∞±ÊòØÂ§ÑÁêÜËØ∑Ê±Ç‰ª•ÂèäÊûÑÈÄ†ÂìçÂ∫î„ÄÇ <!-- raw HTML omitted --></p>
<h3 id="engine‰∏éhost">Engine‰∏éHost</h3>
<p>‰∏Ä‰∏™ServiceÂè™ÂåÖÂê´‰∏Ä‰∏™EngineÔºõ‰∏Ä‰∏™Engine‰∏éService‰∏≠ÁöÑÂ§ö‰∏™ConnectorËøõË°åÁªëÂÆöÔºõÂêåÊó∂‰∏Ä‰∏™EngineÂèØ‰ª•ÂÜÖÂµå‰∏Ä‰∏™ÊàñÂ§ö‰∏™HostÔºàÂç≥HostÊòØEngineÁöÑÂ≠êÂÆπÂô®ÔºâÔºõ <!-- raw HTML omitted --></p>
<p>EngineÊòØÊúÄÈ°∂Â±ÇÁöÑContainerÔºàÂÆπÂô®ÔºâÔºåËÄåHost‰Ωú‰∏∫Â≠êÂÆπÂô®ÔºåË°®Á§∫Engine‰∏≠ÁöÑ‰∏Ä‰∏™ËôöÊãü‰∏ªÊú∫ÔºåÂØπÂ∫î‰∫ÜÊúçÂä°Âô®‰∏≠ÁöÑÁΩëÁªúÂÆû‰ΩìÂêçÔºà‰æãÂ¶ÇÂüüÂêçÊàñËÄÖIPÂú∞ÂùÄÔºâÔºõ <!-- raw HTML omitted --></p>
<p>ÂÆ¢Êà∑Á´ØÈÄöËøá‰∏ªÊú∫ÂêçÊù•Ê†áËØÜ‰ªñ‰ª¨ÊÉ≥Ë¶ÅËøûÊé•ÁöÑ‰∏ªÊú∫Ôºå‰∏ªÊú∫Âêç‰ºö‰Ωú‰∏∫ <strong>HOST</strong> HeaderË¢´ÊîæÂú®HTTPËØ∑Ê±Ç‰∏≠ÔºåEngine‰ºöÊ†πÊçÆHTTP Header‰∏≠HostÁöÑÂÄºÂÜ≥ÂÆöÁî±Âì™‰∏Ä‰∏™HOSTÊù•ÁªßÁª≠Â§ÑÁêÜËØ∑Ê±Ç„ÄÇ <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Engine</span> <span class="na">name=</span><span class="s">&#34;Catalina&#34;</span> <span class="na">defaultHost=</span><span class="s">&#34;localhost&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">&#34;localhost&#34;</span>  <span class="na">appBase=</span><span class="s">&#34;webapps&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">unpackWARs=</span><span class="s">&#34;true&#34;</span> <span class="na">autoDeploy=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/Host&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">&#34;anotherHost&#34;</span> <span class="na">appbase=</span><span class="s">&#34;otherApps&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/Host&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Engine&gt;</span>
</span></span></code></pre></div><p>Âú®EngineÂÖÉÁ¥†ÁöÑÂ±ûÊÄß‰∏≠: <!-- raw HTML omitted --></p>
<ol>
<li>nameÂ±ûÊÄßÁî®‰∫éÁî®Êà∑Êó•ÂøóÂíåÈîôËØØ‰ø°ÊÅØÔºåÂú®Êï¥‰∏™Server‰∏≠Â∫îËØ•‰øùÊåÅÂîØ‰∏ÄÔºõ <!-- raw HTML omitted --></li>
<li>defaultHostË°®Á§∫Â¶ÇÊûúHTTPËØ∑Ê±Ç‰∏≠ÁöÑHOST HeaderÁöÑÂÄº‰∏éÊâÄÊúâÁöÑHostÂÖÉÁ¥†ÈÉΩ‰∏çÂåπÈÖçÔºåÈªòËÆ§‰∫§Áî±defaultHostÊâÄËÆæÂÆöÁöÑHostÂ§ÑÁêÜÔºõ <!-- raw HTML omitted --></li>
</ol>
<p>ÊúÄÂêéÂÜçËØ¥Êòé‰∏Ä‰∏ãHostÁöÑÈÖçÁΩÆÂ±ûÊÄßÔºö <!-- raw HTML omitted --></p>
<ol>
<li>nameË°®Á§∫Tomcat‰∏äËôöÊãü‰∏ªÊú∫ÁöÑ‰∏ªÊú∫ÂêçÔºå‰∏ÄËà¨Êù•ËØ¥‰∏ªÊú∫ÂêçÊòØDNSÊúçÂä°Âô®‰∏≠Â∑≤ÁªèÊ≥®ÂÜåÁöÑÂüüÂêçÔºàÂΩìÁÑ∂defaultHost‰∏çÈúÄË¶ÅÔºåÂè™Ë¶Å‰øùËØÅËÉΩÊé•ÂèóÂà∞Â∞±Â•Ω‰∫ÜÔºâÔºõ <!-- raw HTML omitted --></li>
<li>unpackWARsÊåáÁ§∫‰∫ÜÊòØÂê¶Ë¶ÅÂ∞Ü‰ª£Ë°®WebÂ∫îÁî®ÁöÑWARÊñá‰ª∂Ëß£ÂéãÔºö <!-- raw HTML omitted -->
<ul>
<li>Â¶ÇÊûú‰∏∫trueÔºåÂàôËß£Âéã‰πãÂêéÂÜçËøêË°åwebÂ∫îÁî® <!-- raw HTML omitted --></li>
<li>Â¶ÇÊûú‰∏∫falseÔºåÂàôÁõ¥Êé•‰ΩøÁî®WARÊñá‰ª∂ËøêË°åWebÂ∫îÁî® <!-- raw HTML omitted --></li>
</ul>
</li>
<li>autoDeploy‰ª•ÂèäappBaseÂ±ûÊÄßÊàë‰ª¨ÊîæÂà∞ÂêéÈù¢WebÂ∫îÁî®Ëá™Âä®ÈÉ®ÁΩ≤ÂÜç‰ªãÁªçÔºåÂÖàÁü•ÈÅìappBaseÂ∞±Ë°®Á§∫Â≠òÊîæWebÂ∫îÁî®ÁöÑÁõÆÂΩïÂ∞±ÂèØ‰ª•‰∫Ü <!-- raw HTML omitted --></li>
</ol>
<p>ÊúÄÂêéÂõûÂà∞Êàë‰ª¨ÁöÑHTTPËØ∑Ê±ÇÁöÑ‰æãÂ≠êÔºàÂΩìÁÑ∂ËøôÊó∂ÂÄôËøô‰∫õÊï∞ÊçÆÈÉΩÊòØ‰ªéConnectorÊï¥ÂêàÁöÑServletRequestÂØπË±°‰∏≠Ëé∑Âèñ‰∫ÜÔºâÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="nf">GET</span> <span class="nn">/LearnFilter_war/admin/a.jsp</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</span></span><span class="line"><span class="cl"><span class="n">Host</span><span class="o">:</span> <span class="l">localhost:8080</span>
</span></span><span class="line"><span class="cl"><span class="err">...</span> <span class="l">...</span>
</span></span></code></pre></div><p>Ëá≥Ê≠§Êàë‰ª¨Â∞±Áü•ÈÅì‰∫Ü‰∏Ä‰∏™TomcatÊúçÂä°Âô®ÂèØ‰ª•ÊúâÂîØ‰∏Ä‰∏Ä‰∏™ÂÖ¨ÁΩëIPÔºåËÄåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÈÄöËøáÂ§ö‰∏™ÂüüÂêçÔºàlocalhost, anotherHostÔºâÊù•ËÆøÈóÆÊúçÂä°Âô®ÔºàÂè™Ë¶ÅDNSËÉΩÂ§üËß£ÊûêÂà∞ÂØπÂ∫îÁöÑIPÂú∞ÂùÄÂç≥ÂèØÔºâÔºåÁÑ∂ÂêéEngine‰ºöÊ†πÊçÆHTTPËØ∑Ê±Ç‰∏≠ÁöÑHOSTÂ§¥Â∞ÜËØ∑Ê±ÇÂàÜÈÖçÁªôÂØπÂ∫îÁöÑHOSTÁªÑ‰ª∂ÔºåÊØîÂ¶ÇÊàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÁöÑlocalhostËøô‰∏™HOST„ÄÇ <!-- raw HTML omitted --></p>
<h3 id="context">Context</h3>
<p>Êàë‰ª¨ÁªßÁª≠Â•óÂ®ÉÔºå‰∏Ä‰∏™ServiceÊúâÂîØ‰∏Ä‰∏Ä‰∏™EngineÔºå‰∏Ä‰∏™EngineÂÜÖÂµå‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™HostÔºåËÄå‰∏Ä‰∏™HostÂàôÂèØ‰ª•ÂÜÖÂµå‰∏Ä‰∏™Â§ö‰∏™ContextÔºåÁî®Êù•Ë°®Á§∫‰∏Ä‰∏™ËôöÊãü‰∏ªÊú∫HOST‰∏ãÊâÄËøêË°åÁöÑ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™WebÂ∫îÁî®Á®ãÂ∫èÔºàÂêåÊ†∑‰πüÊòØÂ≠êÂÆπÂô®ÔºâÔºõ <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨Áü•ÈÅìHostÂÖ∑‰ΩìÁöÑË°®Áé∞ÂΩ¢ÂºèÂ∞±ÊòØHOST HeaderÔºåËÄåContextÁöÑÂÖ∑‰ΩìË°®Áé∞ÂΩ¢ÂºèÂ∞±ÊòØÊàë‰ª¨Âú®HTTPËØ∑Ê±Ç‰∏≠ÁöÑURIÔºåÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠Â∞±ÊòØ <code>LearnFilter_war</code>; <!-- raw HTML omitted --></p>
<p>Ëøô‰∏™URIÂÖ∂ÂÆû‰πüÂ∞±ÊòØÊàë‰ª¨Âú®‰ΩøÁî®IDEAÂºÄÂèëÁöÑÊó∂ÂÄôÔºåÂàõÂª∫ÁöÑÈ°πÁõÆÂêçÔºåËÆ∞ÂæóÊàë‰ª¨Âú®ServletÁöÑ‰ªãÁªç‰∏≠ÔºåÊõæÁªèËØ¥Ëøá‰∏Ä‰∏™webÈ°πÁõÆÔºåÂè™Êúâ‰∏Ä‰∏™ServletContextÂØπË±°ÂêóÔºåËÆ∞‰ΩèËøô‰∏ÄÁÇπÔºåÊàë‰ª¨Âú®Â∞ÜWrapperÁöÑÊó∂ÂÄôËøò‰ºöÂÜçÊèêÂà∞ÔºàÂÖ∂ÂÆûWrapperÂ∞±ÊòØÊàë‰ª¨ÊâÄÂºÄÂèëÁöÑ‰∏Ä‰∏™‰∏™ServletÔºâÔºõ <!-- raw HTML omitted --></p>
<p>Âú®Áü•ÈÅì‰∫ÜËøô‰∫õÂÜÖÂÆπ‰πãÂêéÔºå‰Ω†ÂèØËÉΩÊúÄÊÉ≥ÈóÆÁöÑËøòÊòØÔºå‰∏∫‰ªÄ‰πàÊàëÊ≤°ÊúâÂú®server.xml‰∏≠ÁúãÂà∞ContextÂÖÉÁ¥†ÂïäÔºü <!-- raw HTML omitted --></p>
<p>ÂéüÂõ†Â∞±ÊòØÊàë‰ª¨Âú®HostÁöÑÈÖçÁΩÆ‰∏≠ÂºÄÂêØ‰∫ÜËá™Âä®ÈÉ®ÁΩ≤ÔºàautoDeploy=trueÔºâÔºåÂú®Ëøô‰∏™Âú∫ÊôØ‰∏ãÔºåTomcat‰ºöËá™Âä®ÂåπÈÖçURIÁöÑpath‰∏é <code>appBase</code> Â±ûÊÄß‰∏≠ÁöÑÁõÆÂΩïÂêçÁß∞ËøõË°åÂåπÈÖçÔºå‰∏ÄÊó¶ÂåπÈÖç‰∏äÂàôÈªòËÆ§Ëøô‰∏™ÁõÆÂΩïÂ∞±ÊòØË¶ÅÁªßÁª≠Â§ÑÁêÜËØ∑Ê±ÇÁöÑContextÔºå‰πüÂ∞±‰∏çÈúÄË¶ÅÂÜçËøõË°åÈ¢ùÂ§ñÈÖçÁΩÆÁöÑÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">&#34;localhost&#34;</span>  <span class="na">appBase=</span><span class="s">&#34;webapps&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">unpackWARs=</span><span class="s">&#34;true&#34;</span> <span class="na">autoDeploy=</span><span class="s">&#34;true&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="na">deployOnstartup=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/Host&gt;</span>
</span></span></code></pre></div><blockquote>
<p>Â¶ÇÊûúdeployOnStartupÂíåautoDeployËÆæÁΩÆ‰∏∫trueÔºåÂàôtomcatÂêØÂä®Ëá™Âä®ÈÉ®ÁΩ≤Ôºö <!-- raw HTML omitted --></p>
<ul>
<li>ÂΩìÊ£ÄÊµãÂà∞Êñ∞ÁöÑWebÂ∫îÁî®ÊàñWebÂ∫îÁî®ÁöÑÊõ¥Êñ∞Êó∂Ôºå‰ºöËß¶ÂèëÂ∫îÁî®ÁöÑÈÉ®ÁΩ≤(ÊàñÈáçÊñ∞ÈÉ®ÁΩ≤)„ÄÇ <!-- raw HTML omitted --></li>
<li>‰∫åËÄÖÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫é: <!-- raw HTML omitted -->
<ul>
<li>deployOnStartup‰∏∫trueÊó∂ÔºåTomcatÂú®ÂêØÂä®Êó∂Ê£ÄÊü•WebÂ∫îÁî®Ôºå‰∏îÊ£ÄÊµãÂà∞ÁöÑÊâÄÊúâWebÂ∫îÁî®ËßÜ‰ΩúÊñ∞Â∫îÁî®Ôºõ <!-- raw HTML omitted --></li>
<li>autoDeploy‰∏∫trueÊó∂ÔºåTomcatÂú®ËøêË°åÊó∂ÂÆöÊúüÊ£ÄÊü•Êñ∞ÁöÑWebÂ∫îÁî®ÊàñWebÂ∫îÁî®ÁöÑÊõ¥Êñ∞„ÄÇÈô§Ê≠§‰πãÂ§ñÔºå‰∫åËÄÖÁöÑÂ§ÑÁêÜÁõ∏‰ºº„ÄÇ <!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
</blockquote>
<p>‰∏ãÈù¢ÁöÑËøô‰∫õWebÂ∫îÁî®ÈÉΩÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®localhost:8080/xxxËøõË°åËÆøÈóÆÔºö <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-10-21_11-20-02_screenshot.png"
         alt="Figure 4: webpasÁõÆÂΩï‰∏ãÁöÑContext WebÂ∫îÁî®" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 4: <!-- raw HTML omitted -->webpasÁõÆÂΩï‰∏ãÁöÑContext WebÂ∫îÁî®</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨‰πüÂèØ‰ª•ÊâãÂä®ÈÖçÁΩÆÈùôÊÄÅContextÂÖÉÁ¥†ÔºåÂÖ∂‰∏≠ <code>path</code> Ë°®Á§∫URIÔºå <code>docBase</code> Ë°®Á§∫WebÂ∫îÁî®ÁöÑwarÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑ‰ΩçÁΩÆÔºåËÄå <code>reloadable</code> Â±ûÊÄßÂàôË°®Á§∫ÂΩìclassÊñá‰ª∂ÂèëÁîüÊîπÂä®Êó∂ÔºåÊòØÂê¶Ë¶ÅËß¶ÂèëÊï¥‰∏™WebÂ∫îÁî®ÁöÑÈáçÊñ∞Âä†ËΩΩÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;Context</span> <span class="na">path=</span><span class="s">&#34;/&#34;</span> <span class="na">docBase=</span><span class="s">&#34;other_directory_absolute_path/app1.war&#34;</span> <span class="na">reloadable=</span><span class="s">&#34;true&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></div><p>‰ΩÜÊòØ‰∏ÄËà¨‰∏çÂª∫ËÆÆ‰ΩøÁî®ÈùôÊÄÅÈÖçÁΩÆÔºåÂõ†‰∏∫ <code>server.xml</code> Ëøô‰∏™Êñá‰ª∂Âú®‰øÆÊîπÂêéÈúÄË¶ÅÈáçÊñ∞ÂêØÂä®ÊúçÂä°Âô®ÊâçËÉΩÂä†ËΩΩÔºåÂõ†Ê≠§‰∏ÄÊó¶ÈúÄË¶Å‰øÆÊîπPathÁöÑ‰ø°ÊÅØÔºåÂ∞±ÈúÄË¶ÅÈáçÂêØÊúçÂä°Âô®ÔºåËÄåÂú®Ëá™Âä®ÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄôTomcatÂ∞±ÂèØ‰ª•ÈÄöËøáÂÆöÊúüÁöÑÊâ´Êèè‰∫ÜÊ£ÄÊü•WebÂ∫îÁî®ÁöÑË∑ØÂæÑÊòØÂê¶ÂèëÁîü‰∫Ü‰øÆÊîπÔºõ <!-- raw HTML omitted --></p>
<p>Ëá≥Ê≠§ÔºåÊàë‰ª¨ÊÉ≥Ë¶ÅÊ†πÊçÆ <strong>server.xml</strong> ÊâÄËé∑ÂèñÁöÑÁªÑ‰ª∂ÂÖÉÁ¥†‰ø°ÊÅØÂ∑≤ÁªèÂÖ®ÈÉ®‰ªãÁªçÂÆåÊØïÔºå‰ΩÜÊòØContainer‰Ωú‰∏∫Â§ÑÁêÜHTTPËØ∑Ê±ÇÁöÑÂÆπÂô®ÔºåËÇØÂÆöÂíåÊàë‰ª¨Âú®Java WebÁºñÁ®ã‰∏≠ÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ServletÊó∂ÂàÜ‰∏çÂºÄÁöÑÔºåËÄåServletÂÖ∂ÂÆûÊòØË¢´ContainerÁöÑÊúÄÂ∫ïÂ±ÇÂ≠êÁ±ªWrapperÊâÄÂåÖË£π‰ΩøÁî®ÔºåÊàë‰ª¨Â∞ÜÂú®‰∏ãÈù¢ÁöÑÁ´†ËäÇ‰∏≠‰ªãÁªç„ÄÇ <!-- raw HTML omitted --></p>
<h3 id="wrapper">Wrapper</h3>
<p>WrapperÊòØContextÁöÑÂ≠êÂÆπÂô®Ôºå‰πüÊòØTomcatÁöÑÊúÄÂ∫ïÂ±ÇÂÆπÂô®‰∫ÜÔºåÊàë‰ª¨Áü•ÈÅì‰∏Ä‰∏™Context‰ª£Ë°®‰∏Ä‰∏™WebÂ∫îÁî®ÔºåÈÇ£‰πà‰∏Ä‰∏™WrapperÂ∞±‰ª£Ë°®‰∏Ä‰∏™WebÂ∫îÁî®‰∏ãÁöÑ‰∏Ä‰∏™‰∏™ÂäüËÉΩÁªÑ‰ª∂Ôºå‰πüÂ∞±ÊòØÊàë‰ª¨‰πãÂâç‰ªãÁªçËøáÁöÑServletÔºö‰∏Ä‰∏™WrapperÂ∞±ÊòØ‰∏Ä‰∏™ServletÁöÑÂ∞ÅË£Ö„ÄÇ <!-- raw HTML omitted --></p>
<p>Âú®Êàë‰ª¨‰ªãÁªçTomcat‰∏âÂ§ßÁªÑ‰ª∂ÔºöServletÔºåFilter‰ª•ÂèäLisntenerÁöÑÊó∂ÂÄôÊàë‰ª¨ÈÉΩ‰ªãÁªç‰∫ÜËøô‰∫õÁªÑ‰ª∂ÁöÑ‰∏Ä‰∏™ÁîüÂëΩÂë®ÊúüÔºåÂåÖÊã¨init(), destroy()ÊñπÊ≥ïÔºåËÄåWrapperÂ∞±ÊòØÊù•ÁÆ°ÁêÜServletÁöÑÁîüÂëΩÂë®ÊúüÁöÑÔºö <!-- raw HTML omitted --></p>
<blockquote>
<p>void¬†load() throws ServletException <!-- raw HTML omitted --></p>
<p>Load and initialize an instance of this Servlet, if there is not already at least one initialized instance. This can be used, for example, to load Servlets that are marked in the deployment descriptor to be loaded at server startup time. <!-- raw HTML omitted --></p>
</blockquote>
<p>Âú®StandardWrapperÁöÑload()ÊñπÊ≥ï‰∏≠‰ΩøÁî®loadServletÊù•ÂàùÂßãÂåñ‰∏Ä‰∏™ServletÔºåÊé•ÁùÄÂÜçÁî®initServletÊù•ÂàùÂßãÂåñËøô‰∏™Servlet: <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">load</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">this</span><span class="o">.</span><span class="na">instance</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">loadServlet</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">instanceInitialized</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">         <span class="k">this</span><span class="o">.</span><span class="na">initServlet</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">instance</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span> 
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span></code></pre></div><p>Êé•ÁùÄÊàë‰ª¨ÂÖ∑‰ΩìÊù•ÁúãËøô‰∏§‰∏™ÊñπÊ≥ïÔºö <!-- raw HTML omitted --></p>
<blockquote>
<p>public¬†Servlet¬†loadServlet() throws ServletException <!-- raw HTML omitted --></p>
<p>Load and initialize an instance of this servlet, if there is not already at least one initialized instance. This can be used, for example, to load servlets that are marked in the deployment descriptor to be loaded at server startup time. <!-- raw HTML omitted --></p>
<p>Returns: <!-- raw HTML omitted -->
the loaded Servlet instance <!-- raw HTML omitted --></p>
</blockquote>
<p>StandardWrapperÂØπË±°ÁöÑloadServlet()ÂÖàÊòØËé∑Âèñ‰∫ÜÂÖ∂Áà∂ÂÆπÂô®StandardContextÊù•Âä†ËΩΩËøô‰∏™ServletÁ±ªÔºåÂÜçÂà©Áî®initServetlet()Êù•ËøõË°åÂàùÂßãÂåñÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">Servlet</span> <span class="nf">loadServlet</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="o">...</span> <span class="o">...</span> 
</span></span><span class="line"><span class="cl">            <span class="n">InstanceManager</span> <span class="n">instanceManager</span> <span class="o">=</span> <span class="o">((</span><span class="n">StandardContext</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">getParent</span><span class="o">()).</span><span class="na">getInstanceManager</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">servlet</span> <span class="o">=</span> <span class="o">(</span><span class="n">Servlet</span><span class="o">)</span><span class="n">instanceManager</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">servletClass</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">initServlet</span><span class="o">(</span><span class="n">servlet</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">fireContainerEvent</span><span class="o">(</span><span class="s">&#34;load&#34;</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">loadTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">t1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">var12</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">servlet</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>ËÄåinitServlet(Servlet servlet)ÂÅöÁöÑÊúÄÈáçË¶ÅÁöÑ‰∏Ä‰ª∂‰∫ãÊÉÖÂ∞±ÊòØË∞ÉÁî®‰∫ÜservletÁöÑinit()ÊñπÊ≥ïÔºåÂºÄÂêØ‰∫ÜÂÖ∂ÁîüÂëΩÂë®ÊúüÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">initServlet</span><span class="o">(</span><span class="n">Servlet</span> <span class="n">servlet</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">instanceInitialized</span> <span class="o">||</span> <span class="k">this</span><span class="o">.</span><span class="na">singleThreadModel</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">Globals</span><span class="o">.</span><span class="na">IS_SECURITY_ENABLED</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="kt">boolean</span> <span class="n">success</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]{</span><span class="k">this</span><span class="o">.</span><span class="na">facade</span><span class="o">};</span>
</span></span><span class="line"><span class="cl">                        <span class="n">SecurityUtil</span><span class="o">.</span><span class="na">doAsPrivilege</span><span class="o">(</span><span class="s">&#34;init&#34;</span><span class="o">,</span> <span class="n">servlet</span><span class="o">,</span> <span class="n">classType</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="n">success</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="o">(!</span><span class="n">success</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">SecurityUtil</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">servlet</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">servlet</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">facade</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="o">.</span><span class="na">instanceInitialized</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span> 
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>Ëá≥Ê≠§ÔºåTomcatÊúçÂä°Âô®‰πüÂ∞±ÂíåÊàë‰ª¨‰ΩøÁî®Java EEÂÆö‰πâÂíåÂàõÂª∫ÁöÑServletËÅîÁ≥ªËµ∑Êù•‰∫ÜÔºåÊàë‰ª¨‰πüËÉΩÁªòÂà∂Âá∫Êï¥‰∏Ä‰∏™containerÁöÑÂ≠êÂÆπÂô®‰πãÈó¥ÁöÑÂÖ≥Á≥ª‰∫ÜÔºö <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/Tomcat_Container.drawio.png"
         alt="Figure 5: Tomcat ContainerÂ≠êÂÆπÂô®ÁªìÊûÑ" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 5: <!-- raw HTML omitted -->Tomcat ContainerÂ≠êÂÆπÂô®ÁªìÊûÑ</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<h2 id="tomcat‰∏≠ÁöÑ‰∏âÁßçcontextËæ®Êûê">Tomcat‰∏≠ÁöÑ‰∏âÁßçContextËæ®Êûê</h2>
<p>Êó¢ÁÑ∂Êàë‰ª¨ËØ¥Âà∞‰∫ÜServletÊòØÂ¶Ç‰Ωï‰∏éTomcatÊúçÂä°Âô®ÁªìÂêàËµ∑Êù•‰ΩøÁî®ÁöÑÔºåÈÇ£Ëá™ÁÑ∂ÂΩìÁÑ∂‰πüÂ∞ë‰∏ç‰∫ÜFilter‰ª•ÂèäListenerÔºåÊàë‰ª¨Â∞±ÂÄüÊ≠§Êú∫‰ºöÔºåÊù•Â•ΩÂ•ΩËØ¥ÈÅìËØ¥ÈÅìContextÔºõ <!-- raw HTML omitted --></p>
<p>Â¶ÇÊûúÂ§ßÂÆ∂‰∫ÜËß£ËøáServletÁöÑÂºÄÂèëÔºåÈÇ£Â∞±‰∏ÄÂÆöÁü•ÈÅì‰∏Ä‰∏™Ê¶ÇÂøµÂ∞±ÊòØServletContextÔºåËøôÂíåTomcatÁªÑ‰ª∂‰∏≠ÁöÑContext‰ºö‰∏ç‰ºöÊúâ‰ªÄ‰πàËÅîÁ≥ªÂë¢Ôºü <!-- raw HTML omitted --></p>
<blockquote>
<p>org.apache.catalina.Context <!-- raw HTML omitted --></p>
<p>org.apache.catalina.core.StandardContext <!-- raw HTML omitted --></p>
<p>jakarta.servlet.ServletContext <!-- raw HTML omitted --></p>
<p>org.apache.catalina.core.ApplicationContext <!-- raw HTML omitted --></p>
<p>org.apache.catalina.core.ApplicationContextFacade <!-- raw HTML omitted --></p>
</blockquote>
<p>‰∏äÈù¢Êàë‰ª¨‰∏ÄÂÖ±ÊèêÂà∞‰∫Ü5‰∏≠ContextÔºåÊàë‰ª¨‰æùÊ¨°ÂÖàÊù•ÁÆÄÂçïËÆ§ËØÜ‰∏Ä‰∏ãÔºå‰πãÂêéÂÜçÂ±ïÂºÄËÆ≤‰ªñ‰ª¨ÁöÑÂÖ∑‰ΩìÂÖ≥Á≥ªÔºö <!-- raw HTML omitted --></p>
<ol>
<li>org.apache.catalina.ContextÊé•Âè£Ôºö <!-- raw HTML omitted -->
<ul>
<li>ÂÆö‰πâ‰∫ÜTomcat‰∏≠ÁöÑContextÂÆπÂô®ÔºåÂÖ∂Áà∂ÂÆπÂô®‰∏∫HostÔºåÂÖ∂Â≠êÂÆπÂô®‰∏∫WrapperÔºõ <!-- raw HTML omitted --></li>
<li>Áî®Êù•Ë°®Á§∫‰∏Ä‰∏™WebÂ∫îÁî® <!-- raw HTML omitted --></li>
</ul>
</li>
<li>org.apache.catalina.core.StandardContextÁ±ªÔºö <!-- raw HTML omitted -->
<ul>
<li>ÊòØorg.apache.catalina.ContextÊé•Âè£ÁöÑÊ†áÂáÜÂÆûÁé∞ <!-- raw HTML omitted --></li>
<li>‰πãÂêéÊñπ‰æøËæ®ËÆ§ÔºåÊàë‰ª¨Áªü‰∏ÄÁî®StandardContextÊù•Ë°®Á§∫ContextÊé•Âè£‰ª•ÂèäÂÆûÁé∞Á±ª <!-- raw HTML omitted --></li>
</ul>
</li>
<li>jakarta.servlet.ServletContextÊé•Âè£ <!-- raw HTML omitted -->
<ul>
<li>ÂÆö‰πâ‰∫Ü‰∏ÄÁ≥ªÂàóservletÂèØ‰ª•Áî®Êù•‰∏éservletÂÆπÂô®ÈÄö‰ø°ÁöÑÊñπÊ≥ïÔºõ <!-- raw HTML omitted --></li>
<li>ÊØè‰∏Ä‰∏™JVM‰∏≠ÁöÑÊØè‰∏Ä‰∏™webÂ∫îÁî®ÈÉΩÊúâÂîØ‰∏Ä‰∏Ä‰∏™ServletContextÔºàwebÂ∫îÁî®Áõ¥ËßÇÁöÑÊù•ËØ¥Â∞±ÊòØË°®Á§∫ËÆøÈóÆÊúçÂä°Âô®ÊâÄÁî®ÁöÑURL‰∏≠ÊâÄË∑üÁùÄÁöÑURI‰æãÂ¶Ç/catalogÔºåÂπ∂‰∏îÊï¥‰∏™Â∫îÁî®ÂèØËÉΩÂ∞±ÊòØ‰∏Ä‰∏™ <strong>.war</strong> Êñá‰ª∂ÔºâÔºõ <!-- raw HTML omitted --></li>
<li>ÁªÜÂøÉÁöÑÂ∏àÂÇÖÂ∫îËØ•ÂèëÁé∞‰∫ÜËøô‰∏™Êé•Âè£ÊòØÂú®JAVA EEÁöÑÂåÖÈáåÂÆö‰πâ‰∫ÜÔºåÂíåÂÖ∂‰ªñÂú®org.apache.catalina‰∏≠ÂÆö‰πâÁöÑ‰∏çÂêåÔºåËøôÊòØJava EEÂÖàÊèê‰æõÁöÑÊé•Âè£ÔºåÊù•Â∏ÆÂä©webÂ∫îÁî®‰∏≠ÁöÑServletÂ≠òÂÇ®Êï∞ÊçÆÔºåËøõË°åÈÄö‰ø°Ôºõ <!-- raw HTML omitted --></li>
</ul>
</li>
<li>org.apache.catalina.core.ApplicationContextÁ±ªÔºö <!-- raw HTML omitted -->
<ul>
<li>Ëøô‰∏™Á±ªÂ∞±ÊòØTomcatÂØπ‰∫éServletContextÁöÑÂÖ∑‰ΩìÂÆûÁé∞Ôºõ <!-- raw HTML omitted --></li>
</ul>
</li>
<li>org.apache.catalina.core.ApplicationContextFacadeÁ±ªÔºö <!-- raw HTML omitted -->
<ul>
<li>Ëøô‰∏™Á±ªÊòØApplicationContextÁöÑ‰∏Ä‰∏™Èó®Èù¢Á±ªÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ËÆ≤ApplicationContextÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÂ∞ÅË£ÖÂú®Ëøô‰∏™FacadeÈó®Èù¢Á±ªÈáåÈù¢ÔºåÂØπÂ§ñÂ∞±Ë∞ÉÁî®Facade‰∏≠ÁöÑÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫ÜÔºàÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉÔºö<a class="link" href="https://www.runoob.com/w3cnote/facade-pattern-3.html"  target="_blank" rel="noopener"
    >JAVAËÆæËÆ°Ê®°Âºè‰πãÈó®Èù¢Ê®°ÂºèÔºàÂ§ñËßÇÊ®°ÂºèÔºâ</a>Ôºâ <!-- raw HTML omitted --></li>
</ul>
</li>
</ol>
<p>ËøôÊ†∑ËÆ≤ÂÖ∂ÂÆûËøòÊå∫Ââ≤Ë£ÇÁöÑÔºåÂ•ΩÂÉè‰∏§‰∏™ÂÆûÁé∞Á±ªStandardContext‰ª•ÂèäApplicationContextÊ≤°Êúâ‰ªÄ‰πàÁõ¥Êé•ÁöÑËÅîÁ≥ªÔºå‰ΩÜÊòØ‰∫ãÂÆû‰∏ä‰ªñ‰ª¨Âç¥ÊúâÁùÄÂçÉ‰∏ù‰∏áÁºïÁöÑËÅîÁ≥ªÔºö <!-- raw HTML omitted --></p>
<p>StandardContext‰∏≠Â∞±Êúâ‰∏Ä‰∏™ <strong>getServletContext()</strong> ÊñπÊ≥ïÔºåÊàë‰ª¨ÂèØ‰ª•ËßÇÂØüÂà∞ÔºåÂÖ∂‰∏≠ÁîüÊàêÁöÑÂ∞±ÊòØServletContextÁöÑÂÆûÁé∞Á±ª <strong>ApplicationContext</strong>, ÂêåÊó∂ËøîÂõûÂÄºÂ∞±ÊòØApplicationContextÁöÑÈó®Èù¢Á±ªÁöÑÂØπË±°Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StandardContext</span> <span class="kd">extends</span> <span class="n">ContainerBase</span> <span class="kd">implements</span> <span class="n">Context</span><span class="o">,</span> <span class="n">NotificationEmitter</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ServletContext</span> <span class="nf">getServletContext</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ApplicationContext</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">altDDName</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;org.apache.catalina.deploy.alt_dd&#34;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">altDDName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">getFacade</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>‰∏äÈù¢ÁöÑ‰ª£Á†ÅËøòÊúâÂÄºÂæóÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÔºåÂ∞±ÊòØApplicationContextÁöÑÊûÑÈÄ†Âô®‰ΩøÁî®‰∫ÜStandardContextÁöÑÂØπË±°ÔºåÊàë‰ª¨Êé•ÁùÄÂéªÁúãÁúãApplicationContextÁöÑÊ∫êÁ†ÅÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApplicationContext</span> <span class="kd">implements</span> <span class="n">ServletContext</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">ApplicationContext</span><span class="o">(</span><span class="n">StandardContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">service</span> <span class="o">=</span> <span class="o">((</span><span class="n">Engine</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getParent</span><span class="o">().</span><span class="na">getParent</span><span class="o">()).</span><span class="na">getService</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">sessionCookieConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ApplicationSessionCookieConfig</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">populateSessionTrackingModes</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ÂèëÁé∞Âú®ApplicationContext‰∏≠Ôºå <code>this.context</code> Á´üÁÑ∂ÊòØStandardContextÁöÑÂØπË±°ÔºåÊàë‰ª¨Êé•ÁùÄÊü•Êâæ <code>this.context</code> ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂèëÁé∞‰∫ÜÊúâÂæàÂ§ß‰∏ÄÈÉ®ÂàÜÁöÑÊñπÊ≥ï‰∏≠ÈÉΩÂú®‰ΩøÁî®‰∫ÜËøô‰∏™ <strong>StandardContext</strong> ÁöÑÂØπË±°Ôºö <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-10-21_15-32-52_screenshot.png"
         alt="Figure 6: this.contextÂú®ApplicationContext‰∏≠ÁöÑ‰ΩøÁî®ÊÉÖÂÜµ" width="200px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 6: <!-- raw HTML omitted -->this.contextÂú®ApplicationContext‰∏≠ÁöÑ‰ΩøÁî®ÊÉÖÂÜµ</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-10-21_15-42-46_screenshot.png"
         alt="Figure 7: 76Â§Ñ‰ΩøÁî®context" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 7: <!-- raw HTML omitted -->76Â§Ñ‰ΩøÁî®context</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-10-21_15-42-59_screenshot.png"
         alt="Figure 8: 47Â§ÑË∞ÉÁî®‰∫ÜStandardContextÁöÑgetÊñπÊ≥ï" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 8: <!-- raw HTML omitted -->47Â§ÑË∞ÉÁî®‰∫ÜStandardContextÁöÑgetÊñπÊ≥ï</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/2022-10-21_15-44-20_screenshot.png"
         alt="Figure 9: Ë∞ÉÁî®StandardContextÁöÑ‰∫ã‰ª∂Ëß¶ÂèëÊñπÊ≥ï" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 9: <!-- raw HTML omitted -->Ë∞ÉÁî®StandardContextÁöÑ‰∫ã‰ª∂Ëß¶ÂèëÊñπÊ≥ï</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨ÈöêÁ∫¶ÂèØ‰ª•ÊÑüËßâÂà∞ServletContextÂ∞±ÂÉèÊòØStandaardContext‰∏ãÂ±ûÁöÑ‰∏Ä‰∏™ÈÉ®Èó®ÔºåË¥üË¥£ÁÆ°ÁêÜServletÁöÑ‰∏Ä‰∫õ‰∫ãÂä°Ôºå‰ΩÜÊòØÈÉΩË¶ÅÂêëStandardContextËøõË°åÊ±áÊä•‰ª•ÂèäËé∑ÂèñÁâ©ËµÑÁöÑÊÑüËßâ„ÄÇ <!-- raw HTML omitted --></p>
<h2 id="tomcatÂ¶Ç‰ΩïÂêØÂä®‰∏âÂ§ßÁªÑ‰ª∂">TomcatÂ¶Ç‰ΩïÂêØÂä®‰∏âÂ§ßÁªÑ‰ª∂</h2>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÂÖ∑‰ΩìÁúãÁúãStandardContextÊòØÂêØÂä®TomcatÁöÑ‰∏âÂ§ßÁªÑ‰ª∂ÔºåÂÄüÊ≠§Ëøõ‰∏ÄÊ≠•‰∫ÜËß£TomcatÊâÄÂÆö‰πâÁöÑContext‰∏éJava EEËá™Â∏¶ÁöÑËøô‰∏âÂ§ßÁªÑ‰ª∂ÊòØÂ¶Ç‰ΩïÂçèË∞ÉÂ∑•‰ΩúÁöÑÔºö <!-- raw HTML omitted --></p>
<h3 id="contextconfig-configurecontext-‰∏é-standardcontext-startinternal">ContextConfig#configureContext() ‰∏é StandardContext#startInternal()</h3>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Ë¶ÅÈóÆÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢ò: <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">StandardContextÊòØÊÄé‰πàÁü•ÈÅìÂ∫îËØ•Âä†ËΩΩÂì™‰∫õServlet, Filter‰ª•ÂèäListenerÁöÑÔºü
</span></span></code></pre></div><p>Á≠îÊ°àÂÖ∂ÂÆûÂæàÂÆπÊòìÂ∞±ÂèØ‰ª•ÁåúÂà∞ÔºåÂ∞±ÊòØ‰ªéweb.xmlÊàñËÄÖannotation‰∏≠ËØªÂèñÔºö <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨ÁúãÂà∞‰∏ãÈù¢ÁöÑËøô‰∏™ <code>configureContext()</code> ÊñπÊ≥ï‰∏≠ÔºåÈÄöËøáËé∑Âèñ‰∏Ä‰∏™webxmlÂØπË±°ÔºåÁÑ∂Âêé‰ªé‰∏≠ÂàÜÂà´ËØªÂèñ‰∫ÜËøô‰∏âÂ§ßÁªÑ‰ª∂ÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆÂÜÖÂÆπÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">configureContext</span><span class="o">(</span><span class="n">WebXml</span> <span class="n">webxml</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getContextParams</span><span class="o">().</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addParameter</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩFilterÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">FilterDef</span> <span class="n">filter</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getFilters</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">filter</span><span class="o">.</span><span class="na">getAsyncSupported</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">filter</span><span class="o">.</span><span class="na">setAsyncSupported</span><span class="o">(</span><span class="s">&#34;false&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addFilterDef</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="n">FilterMap</span> <span class="n">filterMap</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getFilterMappings</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addFilterMap</span><span class="o">(</span><span class="n">filterMap</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩListnerÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">listener</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getListeners</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addApplicationListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩServletÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">ServletDef</span> <span class="n">servlet</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getServlets</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Wrapper</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">createWrapper</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getLoadOnStartup</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">setLoadOnStartup</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getLoadOnStartup</span><span class="o">().</span><span class="na">intValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getEnabled</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">setEnabled</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getEnabled</span><span class="o">().</span><span class="na">booleanValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getServletName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="n">servlet</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">params</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setRunAs</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getRunAs</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">Set</span><span class="o">&lt;</span><span class="n">SecurityRoleRef</span><span class="o">&gt;</span> <span class="n">roleRefs</span> <span class="o">=</span> <span class="n">servlet</span><span class="o">.</span><span class="na">getSecurityRoleRefs</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">SecurityRoleRef</span> <span class="n">roleRef</span> <span class="o">:</span> <span class="n">roleRefs</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">addSecurityReference</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">roleRef</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">roleRef</span><span class="o">.</span><span class="na">getLink</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setServletClass</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getServletClass</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setOverridable</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">isOverridable</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">webxml</span><span class="o">.</span><span class="na">getServletMappings</span><span class="o">().</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addServletMappingDecoded</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Âä†ËΩΩÈÖçÁΩÆÂÆåÊØï‰πãÂêéÔºåÊé•‰∏ãÊù•Â∞±ÊòØÊàë‰ª¨Âú®‰ªãÁªçFilter‰ª•ÂèäListener‰∏≠ÁöÑÊñáÁ´†‰∏≠ÊõæÁªè‰ªãÁªçËøáÔºåStandardContextÈÄöËøá <code>startInternal()</code> Ëøô‰∏™ÊñπÊ≥ïÊù•‰æùÊ¨°ÂêØÂä®Âä†ËΩΩ <strong>Listener</strong>, <strong>Filter</strong> ‰ª•Âèä <strong>Servlet</strong>: <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">protected</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">startInternal</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">LifecycleException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 1. ListenerStart(), ÂêØÂä®Âä†ËΩΩListener
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">ok</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">listenerStart</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;standardContext.listenerFail&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="n">ok</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// 2. filterStart(), ÂêØÂä®Âä†ËΩΩFilter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">ok</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">filterStart</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;standardContext.filterFail&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="n">ok</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 3. loadOnStartup(), ÂêØÂä®Âä†ËΩΩServlet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">ok</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">loadOnStartup</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">findChildren</span><span class="o">()))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;standardContext.servletFail&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="n">ok</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kd">super</span><span class="o">.</span><span class="na">threadStart</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>‰∏ãÈù¢Â∞±ËÆ©Êàë‰ª¨Êù•ÈíàÂØπÊØè‰∏Ä‰∏™ÁªÑ‰ª∂Êù•ÁúãStandardContextÊòØÂ¶Ç‰ΩïËØªÂèñÈÖçÁΩÆÔºåÂ¶Ç‰ΩïÂàùÂßãÂåñÂíåÂä†ËΩΩÂØπË±°ÁöÑÔºö <!-- raw HTML omitted --></p>
<h3 id="listener">Listener</h3>
<h4 id="Âä†ËΩΩlistenerÈÖçÁΩÆ">Âä†ËΩΩListenerÈÖçÁΩÆ</h4>
<p>ÈÄöËøáContextConfig.configureContext‰ªé <strong>web.xml</strong> ‰∏≠ÂêëStandardContextÂä†ËΩΩlistenerÈÖçÁΩÆÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">configureContext</span><span class="o">(</span><span class="n">WebXml</span> <span class="n">webxml</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩListnerÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">listener</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getListeners</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addApplicationListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>ÂÖ∂‰∏≠ÔºåStandardContext.addApplicationListener() ÊñπÊ≥ïÊù•Â∞ÜListenerÁöÑÁ±ªÂêçÂà∞StandardContext‰∏≠ÁöÑ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Êï∞ÁªÑ <strong>applicationListeners</strong> ‰∏≠Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">String</span> <span class="n">applicationListeners</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">0</span><span class="o">];</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">addApplicationListener</span><span class="o">(</span><span class="n">String</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">applicationListenersLock</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">results</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">applicationListeners</span><span class="o">.</span><span class="na">length</span> <span class="o">+</span> <span class="n">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">applicationListeners</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">listener</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">applicationListeners</span><span class="o">[</span><span class="n">i</span><span class="o">]))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;standardContext.duplicateListener&#34;</span><span class="o">,</span><span class="n">listener</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">applicationListeners</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">results</span><span class="o">[</span><span class="n">applicationListeners</span><span class="o">.</span><span class="na">length</span><span class="o">]</span> <span class="o">=</span> <span class="n">listener</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">applicationListeners</span> <span class="o">=</span> <span class="n">results</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">fireContainerEvent</span><span class="o">(</span><span class="s">&#34;addApplicationListener&#34;</span><span class="o">,</span> <span class="n">listener</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="ÂàùÂßãÂåñÂíåÂä†ËΩΩlistener">ÂàùÂßãÂåñÂíåÂä†ËΩΩListener</h4>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÁúãÂú®StandardContext.startInternal()‰∏≠ÊòØÂ¶Ç‰ΩïÂàùÂßãÂåñListenerÁöÑÔºö <!-- raw HTML omitted --></p>
<p>listenerStart()ÊòØÁî®Êù•Â∞ÜÊâÄÊúâÊàë‰ª¨Âú®WebÂ∑•Á®ã‰∏≠ÊâÄÂÆö‰πâÁöÑListenersËøõË°åÂàùÂßãÂåñÁöÑÊñπÊ≥ïÔºåÂÆÉÂÖàÊòØ‰ªéStandardContextÁöÑprivateÂ±ûÊÄßapplicationListenersËøôÊ†∑‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂèòÈáè‰∏≠ÊãøÂà∞ÊâÄÊúâÈúÄË¶ÅÂä†ËΩΩÁöÑListenersÁöÑÂêçÂ≠óÔºåÊé•ÁùÄÁî® <strong>this.getInstanceManager().newInstance(listener)</strong> ÁöÑÂΩ¢ÂºèÊù•ËøõË°åÂä†ËΩΩ„ÄÇ <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * Configure the set of instantiated application event listeners
</span></span></span><span class="line"><span class="cl"><span class="cm">     * for this Context.
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return &lt;code&gt;true&lt;/code&gt; if all listeners wre
</span></span></span><span class="line"><span class="cl"><span class="cm">     * initialized successfully, or &lt;code&gt;false&lt;/code&gt; otherwise.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">applicationListeners</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">0</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">listenerStart</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">       <span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">String</span><span class="o">[]</span> <span class="n">listeners</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">findApplicationListeners</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Object</span><span class="o">[]</span> <span class="n">results</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">listeners</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">boolean</span> <span class="n">ok</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">results</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span> <span class="o">...</span> 
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">String</span> <span class="n">listener</span> <span class="o">=</span> <span class="n">listeners</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">                <span class="n">results</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getInstanceManager</span><span class="o">().</span><span class="na">newInstance</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">...</span> <span class="o">...</span>        
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ÊúÄÂêéÊù•ÁúãËøô‰∏™ <code>newInstance()</code> ÊòØÂ¶Ç‰ΩïÊù•Âä†ËΩΩlistenerÁöÑÔºåÂ¶ÇÊûúÁúãËøáÊàë‰ª¨ÊúâÂÖ≥JavaÂèçÂ∞ÑÁöÑÊñáÁ´†ÊàñËÄÖ‰∫ÜËß£ÂèçÂ∞ÑÁöÑÂ∏àÂÇÖÂ∫îËØ•ÂæàÂø´Â∞±ËÉΩÂèçÂ∫îËøáÊù•ÔºåËøô‰∏™ÊñπÊ≥ïÂ∞±ÊòØÈÄöËøáJavaÂèçÂ∞ÑÊú∫Âà∂Êù•Ê†πÊçÆListenerÁöÑÁ±ªÂêçÊù•ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑListenerÂØπË±°Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">newInstance</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">className</span><span class="o">,</span> <span class="kd">final</span> <span class="n">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">NamingException</span><span class="o">,</span> <span class="n">InvocationTargetException</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">InstantiationException</span><span class="o">,</span> <span class="n">ClassNotFoundException</span><span class="o">,</span> <span class="n">IllegalArgumentException</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">NoSuchMethodException</span><span class="o">,</span> <span class="n">SecurityException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">newInstance</span><span class="o">(</span><span class="n">clazz</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">().</span><span class="na">newInstance</span><span class="o">(),</span> <span class="n">clazz</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>ÂÖ∂ÂÆûÈÄöËøáËøô‰∏™‰æãÂ≠êÔºåÊàë‰ª¨‰πüËÉΩÁêÜËß£Âà∞‰ΩøÁî®ÂèçÂ∞ÑÁöÑÂ¶ôÂ§Ñ‰∫ÜÔºåÂ∞±ÊòØÊó†ËÆ∫‰Ω†ÂàõÂª∫ÁöÑListenerÂè´‰ªÄ‰πàÂêçÂ≠óÔºåÂè™Ë¶Å‰Ω†ÂæÄÈÖçÁΩÆÈáåÂÜôÂ•ΩÔºåÂ∞±ÂèØ‰ª•Ëá™Âä®ËøõË°åÂä†ËΩΩ‰ª•ÂèäÂà©Áî®Ôºõ <!-- raw HTML omitted --></p>
<p>ÂêåÊó∂ÔºåÂ¶ÇÊûú‰Ω†‰øÆÊîπ‰∫ÜËøô‰∏™Á±ªÁöÑÂêçÂ≠óÔºåÈÇ£‰πüÂè™ÈúÄË¶Å‰øÆÊîπ‰∏Ä‰∏ãÈÖçÁΩÆÊñá‰ª∂Èáå‰øÆÊîπ‰∏Ä‰∏ãÂ∞±Â•Ω‰∫ÜÔºå‰∏çÈúÄË¶ÅÂéª‰∏Ä‰∏™‰∏™ÊîπÊ∫êÁ†Å„ÄÇ <!-- raw HTML omitted --></p>
<h3 id="filter">Filter</h3>
<h4 id="Âä†ËΩΩfilterÁõ∏ÂÖ≥ÈÖçÁΩÆ">Âä†ËΩΩFilterÁõ∏ÂÖ≥ÈÖçÁΩÆ</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">configureContext</span><span class="o">(</span><span class="n">WebXml</span> <span class="n">webxml</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩFilterÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">FilterDef</span> <span class="n">filter</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getFilters</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">filter</span><span class="o">.</span><span class="na">getAsyncSupported</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">filter</span><span class="o">.</span><span class="na">setAsyncSupported</span><span class="o">(</span><span class="s">&#34;false&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addFilterDef</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="n">FilterMap</span> <span class="n">filterMap</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getFilterMappings</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addFilterMap</span><span class="o">(</span><span class="n">filterMap</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ <strong>configureContext()</strong> Âú®ÂØπfilterËøõË°åÂ§ÑÁêÜÁöÑÊó∂ÂÄôÔºåÊ∑ªÂä†‰∫Ü‰∏§‰∏™ÂÜÖÂÆπÔºöFilterDef‰ª•ÂèäFilterMapÔºåËøô‰πüÂ∞±ÂØπÂ∫î‰∫ÜÊàë‰ª¨Âú®ÂºÄÂèëÁöÑËøáÁ®ã‰∏≠Ê≥®ÂÜå‰∏Ä‰∏™filterÈúÄË¶ÅÂú® <strong>web.xml</strong> ‰∏≠ÂÆåÊàêÁöÑÈÖçÁΩÆÔºö&lt;filter&gt;‰ª•Âèä&lt;filter-mapping&gt; <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;filter&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter-name&gt;</span>HelloFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter-class&gt;</span>pers.javasec.javafilter.HelloFilter<span class="nt">&lt;/filter-class&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/filter&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;filter-mapping&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter-name&gt;</span>HelloFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url-pattern&gt;</span>/admin/*<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div><p>Êé•ÁùÄÊàë‰ª¨ÂèØ‰ª•Ê†πÊçÆStandardContext‰∏≠‰∏§‰∏™ÂÖ∑‰ΩìÁöÑaddÊñπÊ≥ïÁúãÂà∞Ôºå‰ªñ‰ª¨ÈÉΩÊòØÂ∞ÜÂæóÂà∞ÈÖçÁΩÆ‰ø°ÊÅØÂàÜÂà´Â≠òÂÖ•HashMapÂΩì‰∏≠Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * Add a filter definition to this Context.
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param filterDef The filter definition to be added
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addFilterDef</span><span class="o">(</span><span class="n">FilterDef</span> <span class="n">filterDef</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">filterDefs</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">filterDefs</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">filterDef</span><span class="o">.</span><span class="na">getFilterName</span><span class="o">(),</span> <span class="n">filterDef</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p><figure><img src="/ox-hugo/2022-10-24_17-37-29_screenshot.png"
         alt="Figure 10: Âçï‰∏™FilterDef‰∏≠ÊâÄÂ≠òÊîæÁöÑ‰ø°ÊÅØÔºö" width="400px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 10: <!-- raw HTML omitted -->Âçï‰∏™FilterDef‰∏≠ÊâÄÂ≠òÊîæÁöÑ‰ø°ÊÅØÔºö</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * Add a filter mapping to this Context at the end of the current set
</span></span></span><span class="line"><span class="cl"><span class="cm">     * of filter mappings.
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param filterMap The filter mapping to be added
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @exception IllegalArgumentException if the specified filter name
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  does not match an existing filter definition, or the filter mapping
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  is malformed
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addFilterMap</span><span class="o">(</span><span class="n">FilterMap</span> <span class="n">filterMap</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">validateFilterMap</span><span class="o">(</span><span class="n">filterMap</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add this filter mapping to our registered set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">filterMaps</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">filterMap</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">fireContainerEvent</span><span class="o">(</span><span class="s">&#34;addFilterMap&#34;</span><span class="o">,</span> <span class="n">filterMap</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p><figure><img src="/ox-hugo/2022-10-24_17-42-01_screenshot.png"
         alt="Figure 11: Âçï‰∏™FilterMap‰∏≠Â≠òÊîæÁöÑÂÜÖÂÆπ" width="400px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 11: <!-- raw HTML omitted -->Âçï‰∏™FilterMap‰∏≠Â≠òÊîæÁöÑÂÜÖÂÆπ</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<h4 id="ÂàùÂßãÂåñÂíåÂä†ËΩΩfilter">ÂàùÂßãÂåñÂíåÂä†ËΩΩFilter</h4>
<p>Êàë‰ª¨Âú®‰∏äÈù¢ÁöÑfilterÈÖçÁΩÆÂä†ËΩΩ‰∏≠ÁúãÂà∞‰∫ÜStandardContext‰ºöÂ≠òÊîæÊØè‰∏Ä‰∏™filterÁöÑÂü∫Êú¨‰ø°ÊÅØÂú® <strong>filterDefs</strong> ‰∏≠„ÄÇ <!-- raw HTML omitted --></p>
<p>ÈÇ£‰πàÂú®Êé•ÁùÄÊù•ÁúãStandardContextÂú®ÂàùÂßãÂåñÂíåÂä†ËΩΩFilterÁöÑËøáÁ®ã‰∏≠ÔºåÂ∞±ÊòØÈÄöËøáËØªÂèñ <code>filterDefs</code> ‰∏≠ÁöÑfilter‰ø°ÊÅØÔºåÊé•ÁùÄ‰∏∫ÊØè‰∏Ä‰∏™filterÈÉΩÂàõÂª∫‰∏Ä‰∏™filterconfigÂØπË±°ÔºåÂπ∂Â≠òÂÖ•hashmap <code>filterConfigs</code> ‰∏≠Ôºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * The set of filter configurations (and associated filter instances) we
</span></span></span><span class="line"><span class="cl"><span class="cm"> * have initialized, keyed by filter name.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ApplicationFilterConfig</span><span class="o">&gt;</span> <span class="n">filterConfigs</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * The set of filter definitions for this application, keyed by
</span></span></span><span class="line"><span class="cl"><span class="cm"> * filter name.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">FilterDef</span><span class="o">&gt;</span> <span class="n">filterDefs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span></code></pre></div><p>filterStart(): <!-- raw HTML omitted --></p>
<ul>
<li>ÂØπ‰∫éÊØè‰∏Ä‰∏™‰øùÂ≠òÁöÑFilterDefÂØπË±°ÈÉΩÂàõÂª∫‰∏Ä‰∏™FilterConfigÊù•ËøõË°åÂ∞ÅË£Ö‰øùÂ≠òÔºõ <!-- raw HTML omitted -->
<ul>
<li>ÁõÆÁöÑÊòØ‰∏∫‰∫ÜÂú®‰πãÂêéÂø´ÈÄüÂàõÂª∫ÂÆû‰æãÔºõ <!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">filterStart</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Instantiate and record a FilterConfig for each defined filter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">boolean</span> <span class="n">ok</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">filterConfigs</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">filterConfigs</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">FilterDef</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">filterDefs</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">getLogger</span><span class="o">().</span><span class="na">isDebugEnabled</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">getLogger</span><span class="o">().</span><span class="na">debug</span><span class="o">(</span><span class="s">&#34; Starting filter &#39;&#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&#34;&#39;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// ‰∏∫ÊØè‰∏Ä‰∏™filterDefÈÉΩÂàõÂª∫‰∏Ä‰∏™filterConfig
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">ApplicationFilterConfig</span> <span class="n">filterConfig</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                        <span class="k">new</span> <span class="n">ApplicationFilterConfig</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// Â∞ÜÂàõÂª∫ÁöÑfilterConfigÂ≠òÂÖ•filterConfigs‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">filterConfigs</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">filterConfig</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">t</span> <span class="o">=</span> <span class="n">ExceptionUtils</span><span class="o">.</span><span class="na">unwrapInvocationTargetException</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">ExceptionUtils</span><span class="o">.</span><span class="na">handleThrowable</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">getLogger</span><span class="o">().</span><span class="na">error</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                        <span class="s">&#34;standardContext.filterStart&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">),</span> <span class="n">t</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">ok</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ok</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p><figure><img src="/ox-hugo/2022-10-24_17-43-51_screenshot.png"
         alt="Figure 12: Âçï‰∏™filterConfigÂ≠òÊîæÁöÑÂÜÖÂÆπ" width="400px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 12: <!-- raw HTML omitted -->Âçï‰∏™filterConfigÂ≠òÊîæÁöÑÂÜÖÂÆπ</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<h3 id="servlet">Servlet</h3>
<h4 id="Âä†ËΩΩservletÁõ∏ÂÖ≥ÈÖçÁΩÆ">Âä†ËΩΩServletÁõ∏ÂÖ≥ÈÖçÁΩÆ</h4>
<p>ÊúÄÂêéÊàë‰ª¨Êù•ÁúãÁúãServletÔºåÂ§ÑÁêÜÁöÑËØ≠Âè•ÊòéÊòæÂèòÂ§ö‰∫ÜÔºõ <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;servlet&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-name&gt;</span>MyServlet<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-class&gt;</span>pers.medic.jsplearn.MyServlet<span class="nt">&lt;/servlet-class&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;init-param&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;param-name&gt;</span>username<span class="nt">&lt;/param-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;param-value&gt;</span>root<span class="nt">&lt;/param-value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/init-param&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/servlet&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;servlet-mapping&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-name&gt;</span>MyServlet<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url-pattern&gt;</span>/my<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></div><p>ÂØπ‰∫éÊâÄÊúâServletÁöÑÈÖçÁΩÆÔºåconfigureContextÈÉΩ‰ºö‰∏∫ÂÖ∂ÂçïÁã¨Âª∫Á´ã‰∏Ä‰∏™WrapperÊù•ËøõË°åÂ∞ÅË£ÖÔºõ <!-- raw HTML omitted --></p>
<p>Âπ∂‰∏îËøô‰∫õWrapper‰ºöË¢´ÂΩì‰ΩúÂ≠êÂÆπÂô®ÈÄöËøá <code>addChild()</code> Ë¢´ÂµåÂÖ• <strong>StandardContext</strong> ÂΩì‰∏≠Ôºõ <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">configureContext</span><span class="o">(</span><span class="n">WebXml</span> <span class="n">webxml</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âä†ËΩΩServletÁöÑÈÖçÁΩÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">ServletDef</span> <span class="n">servlet</span> <span class="o">:</span> <span class="n">webxml</span><span class="o">.</span><span class="na">getServlets</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â∞ÜÊØè‰∏Ä‰∏™&lt;servlet&gt;ÈÖçÁΩÆÈÉΩÂ∞ÅË£ÖÂà∞Wrapper‰∏≠Âéª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Wrapper</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">createWrapper</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getServletName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Â∞ÜÂΩìÂâç&lt;servlet&gt;‰∏ãÁöÑÊâÄÊúâÂ≠òÂÇ®ÁöÑparamsÂèòÈáè‰ø°ÊÅØËøõË°åÂä†ËΩΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="n">servlet</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">params</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setRunAs</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getRunAs</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">wrapper</span><span class="o">.</span><span class="na">setServletClass</span><span class="o">(</span><span class="n">servlet</span><span class="o">.</span><span class="na">getServletClass</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â¢ûÂä†&lt;servlet-mapping&gt;‰∏≠ÁöÑ‰ø°ÊÅØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">webxml</span><span class="o">.</span><span class="na">getServletMappings</span><span class="o">().</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="o">.</span><span class="na">addServletMappingDecoded</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="ÂàùÂßãÂåñÂíåÂä†ËΩΩservlet">ÂàùÂßãÂåñÂíåÂä†ËΩΩServlet</h4>
<p>loadOnStartupÊòØStandardContext‰∏≠Áî®Êù•ÂêØÂä®ÊâÄÊúâÊ≥®ÂÜåÁöÑServletÔºàWrapperÔºâÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨‰∏ªË¶ÅÂÖ≥Ê≥®‰∏ãÂçäÈÉ®ÂàÜÁöÑforÂæ™ÁéØ‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞ <strong>wrapper.load()</strong> Â∞±ÊòØÁî®Êù•ÂêØÂä®WrapperÁöÑÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Load and initialize all servlets marked &#34;load on startup&#34; in the
</span></span></span><span class="line"><span class="cl"><span class="cm"> * web application deployment descriptor.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param children Array of wrappers for all currently defined
</span></span></span><span class="line"><span class="cl"><span class="cm"> *  servlets (including those not declared load on startup)
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @return &lt;code&gt;true&lt;/code&gt; if load on startup was considered successful
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">loadOnStartup</span><span class="o">(</span><span class="n">Container</span> <span class="n">children</span><span class="o">[])</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Collect &#34;load on startup&#34; servlets that need to be initialized
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TreeMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Wrapper</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">(</span><span class="n">Container</span> <span class="n">child</span> <span class="o">:</span> <span class="n">children</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Wrapper</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="o">(</span><span class="n">Wrapper</span><span class="o">)</span> <span class="n">child</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">loadOnStartup</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">getLoadOnStartup</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">loadOnStartup</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">loadOnStartup</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Wrapper</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">list</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Load the collected &#34;load on startup&#34; servlets
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Wrapper</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">:</span> <span class="n">map</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Wrapper</span> <span class="n">wrapper</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">wrapper</span><span class="o">.</span><span class="na">load</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ServletException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">getLogger</span><span class="o">().</span><span class="na">error</span><span class="o">(</span><span class="n">sm</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;standardContext.loadOnStartup.loadException&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                      <span class="n">getName</span><span class="o">(),</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">getName</span><span class="o">()),</span> <span class="n">StandardWrapper</span><span class="o">.</span><span class="na">getRootCause</span><span class="o">(</span><span class="n">e</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// NOTE: load errors (including a servlet that throws
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// UnavailableException from the init() method) are NOT
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// fatal to application startup
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// unless failCtxIfServletStartFails=&#34;true&#34; is specified
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">getComputedFailCtxIfServletStartFails</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ÂÜçÂáëËøëÁÇπÁúãÁúãËøô‰∏™ <strong>wrapper.load()</strong> ÊñπÊ≥ïÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">load</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">instance</span> <span class="o">=</span> <span class="n">loadServlet</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(!</span><span class="n">instanceInitialized</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">initServlet</span><span class="o">(</span><span class="n">instance</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ÂèØ‰ª•Êú¨Ë¥®‰∏äÂ∞±ÊòØÈÄöËøáË∞ÉÁî®initServlet()ÊñπÊ≥ïËøõËÄåÊúÄÁªàË∞ÉÁî® <code>servlet.init()</code> Êù•ÊúÄÁªàÂºÄÂêØservletÁöÑÁîüÂëΩÂë®Êúü <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">initServlet</span><span class="o">(</span><span class="n">Servlet</span> <span class="n">servlet</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Call the initialization method of this servlet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="o">(</span> <span class="n">Globals</span><span class="o">.</span><span class="na">IS_SECURITY_ENABLED</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">boolean</span> <span class="n">success</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span> <span class="n">facade</span> <span class="o">};</span>
</span></span><span class="line"><span class="cl">                    <span class="n">SecurityUtil</span><span class="o">.</span><span class="na">doAsPrivilege</span><span class="o">(</span><span class="s">&#34;init&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                               <span class="n">servlet</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                               <span class="n">classType</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                               <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">success</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="o">(!</span><span class="n">success</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// destroy() will not be called, thus clear the reference now
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">SecurityUtil</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">servlet</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// ÂºÄÂêØservletÁöÑÁîüÂëΩÂë®Êúü
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">servlet</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">facade</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">instanceInitialized</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h3 id="Â∞èÁªì">Â∞èÁªì</h3>
<p>ÈÄöËøá‰∏äÈù¢ÂØπ‰∫éJava EE‰∏≠ÁöÑ‰∏âÂ§ßÁªÑ‰ª∂‰∏éTomcat‰πãÈó¥ÁöÑËÅîÁ≥ªÔºåÊàë‰ª¨ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÁöÑ‰∫ÜËß£TomcatÊòØÂ¶Ç‰ΩïÈÄöËøáweb.xmlÊù•ËØªÂèñÁî±ÂºÄÂèëËÄÖÂÆö‰πâÁöÑServlet, Listener‰ª•ÂèäFilterÁöÑÔºåËØªÂèñ‰πãÂêé‰ºö‰ª•ÂêÑÁßçÂΩ¢ÂºèË¢´‰øùÂ≠òÂú® StandardContext ÂÆû‰æãÂΩì‰∏≠ÔºåÂú® StandardContext ÂêØÂä®ÁöÑÊó∂ÂÄôÂ∞±‰ºöÂÜçË¢´ÊãøÂá∫Êù•ËøõË°åÂàùÂßãÂåñÂíåÂä†ËΩΩ„ÄÇ <!-- raw HTML omitted --></p>
<p><figure><img src="/ox-hugo/Tomcat_and_Servlet.drawio.png"
         alt="Figure 13: Tomcat‰∏é‰∏âÂ§ßÁªÑ‰ª∂ÁöÑÂÖ≥Á≥ª" width="500px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 13: <!-- raw HTML omitted -->Tomcat‰∏é‰∏âÂ§ßÁªÑ‰ª∂ÁöÑÂÖ≥Á≥ª</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<h2 id="tomcatÂíåservletÂ§ÑÁêÜhttpËØ∑Ê±Ç">TomcatÂíåServletÂ§ÑÁêÜHTTPËØ∑Ê±Ç</h2>
<h3 id="pipeline-valveË¥£‰ªªÈìæ">Pipeline-ValveË¥£‰ªªÈìæ</h3>
<p>ÁõÆÂâçÊàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫ÜContainer‰∏≠ÊâÄÊúâÂ≠êÂÆπÂô®ÁöÑ‰ΩúÁî®‰ª•ÂèäÁªìÊûÑÔºå‰πüÈÄöËøá‰ª£Á†ÅÊù•Â≠¶‰π†‰∫ÜTomcat‰∏éJava Web‰∏âÂ§ßÁªÑ‰ª∂ÊòØÂ¶Ç‰ΩïÂÖ±Âêå‰ΩøÁî®ÁöÑ‰∫ÜÔºõ <!-- raw HTML omitted --></p>
<p>ÊúÄÂêéÂ∞±ËÆ©Êàë‰ª¨ÂÜç‰∏ÄÊ¨°Ê∑±ÂÖ•‰ª£Á†ÅÔºåÁúãÁúãTomcatÁöÑContainerÂÆπÂô®ÂíåJava EEÁöÑ‰∏âÂ§ßÁªÑ‰ª∂ÊòØÂ¶Ç‰Ωï‰∏ÄÊ≠•Ê≠•Â§ÑÁêÜ‰∏ÄÊ¨°Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑHTTPËØ∑Ê±ÇÁöÑÔºõ <!-- raw HTML omitted --></p>
<p>Êàë‰ª¨Áü•ÈÅìTomcatÁöÑConnectorËøûÊé•Âô®‰ºöË¥üË¥£Êé•ÂèóÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑHTTPËØ∑Ê±ÇÔºåÂπ∂Â∞ÜRequest‰ª•ÂèäResponseÂ∞ÅË£ÖÂ•Ω‰∫§Áî±ContainerËøõË°åÂ§ÑÁêÜÔºö <!-- raw HTML omitted --></p>
<p>ËÄåËøôÂõõ‰∏™ContainerÂ≠êÂÆπÂô®Á±ªÁöÑÂÆûÁé∞Á±ªÈÉΩ‰ª•StandardXXXÂëΩÂêç(e.g., StandardContext), ËÄåËøô‰∫õÂÆûÁé∞Á±ªÈÉΩÊó†‰∏Ä‰æãÂ§ñÁöÑÁªßÊâø‰∫Ü <code>ContainerBase</code> ÊäΩË±°Á±ªÔºåËÄåËøô‰∏™ÊäΩË±°Á±ªÁöÑÂÆö‰πâÂ∞±Â∫îÁî®‰∫Ü‰∏Ä‰∏™ËÆæËÆ°Ê®°ÂºèÔºö<a class="link" href="https://www.runoob.com/design-pattern/chain-of-responsibility-pattern.html"  target="_blank" rel="noopener"
    >Ë¥£‰ªªÈìæÊ®°ÂºèÔºàËèúÈ∏üÊïôÁ®ãÔºâ</a>ÔºåÂÖ∂ÊÄùÊÉ≥‰πüÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂ∞ÜÂØπ‰∫é‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ‰ªªÂä°ÊãÜÂàÜÂºÄÔºåÂ∞ÜË¥£‰ªªÂàÜÈÖçÂà∞‰∏ÄÊù°Ë¥£‰ªªÈìæÁöÑÊØè‰∏ÄÁéØ‰∏äÔºå‰ªéËÄåËøõË°åÂàÜÊ≠•Â§ÑÁêÜÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">ContainerBase</span> <span class="kd">extends</span> <span class="n">LifecycleMBeanBase</span> <span class="kd">implements</span> <span class="n">Container</span>
</span></span></code></pre></div><p>Ê†πÊçÆËøô‰∏™ËÆæËÆ°Ê®°ÂºèÔºåÊØè‰∏Ä‰∏™ContainerÂ≠êÂÆπÂô®ÈÉΩ‰ºöÁÆ°ÁêÜ‰∏Ä‰∏™ <strong>Pipeline</strong> Á±ªÂÆû‰æãÔºåÁî®‚ÄúÁÆ°ÈÅì‚ÄùÊù•Ë°®Á§∫‰∏ÄÊù°‚ÄúË¥£‰ªªÈìæ‚ÄùÔºåËÄå‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ <strong>Valve</strong> ÈòÄÈó®ÂÆû‰æãÂ∞Ü‰ºöË¢´Ê∑ªÂä†Âà∞ <strong>Pipeline</strong> ÂΩì‰∏≠Êù•ÂàÜÂà´ÂØπËØ∑Ê±ÇËøõË°åÂ§ÑÁêÜ„ÄÇ <!-- raw HTML omitted --></p>
<p>‰∏ãÈù¢ÊòØ‰∏§‰∏™ContainerBaseÊâÄÂÆö‰πâÁöÑÈúÄË¶ÅË¢´ÂÆûÁé∞ÁöÑabstractÊñπÊ≥ïÔºö <!-- raw HTML omitted --></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Type</th>
<th>Data</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>addChild</td>
<td>Container</td>
<td>Ê∑ªÂä†Â≠êÂÆπÂô®Ôºàe.g, Engine.addChild(Host)Ôºâ</td>
</tr>
<tr>
<td>pipeline.addValve</td>
<td>Valve</td>
<td>Â∞Ü‰∏Ä‰∏™ValveÊ∑ªÂä†Âà∞Pipeline‰∏≠</td>
</tr>
</tbody>
</table></div>
<p>ÊØè‰∏Ä‰∏™ContainerÈÉΩ‰ºöÁî® <code>setBasic()</code> ÊñπÊ≥ïÂú®ÊûÑÈÄ†Âô®‰∏≠‰ºöÂêëpipeple‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÈªòËÆ§ÁöÑ <code>Valve</code>, ÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ <strong>StandardEngine</strong>: <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * The Pipeline object with which this Container is associated.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="kd">final</span> <span class="n">Pipeline</span> <span class="n">pipeline</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StandardPipeline</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * Create a new StandardEngine component with the default basic Valve.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">StandardEngine</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// setBasic(): Âêëpipeline‰∏≠Ê∑ªÂä†ÈªòËÆ§ÁöÑValve
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">pipeline</span><span class="o">.</span><span class="na">setBasic</span><span class="o">(</span><span class="k">new</span> <span class="n">StandardEngineValve</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* Set the jmvRoute using the system property jvmRoute */</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>Êàë‰ª¨ËØ¥ËøáPipeline‰∏≠ÁöÑÊâÄÊúâValveÈÉΩÊòØÁî®Êù•ÂàÜÊâπÂ§ÑÁêÜËØ∑Ê±ÇÁöÑÔºåÈÇ£‰πà‰ªñ‰ª¨Â∞Ü‰ºöË¢´Ëá™Â∏¶ÁöÑ <strong>invoke()</strong> ÊñπÊ≥ïÊâÄ‰æùÊ¨°Ë∞ÉÁî®ÔºåÈªòËÆ§ÁöÑValve‰∏ÄËà¨Âè´ÂÅöStandardXXXValveÔºå‰ºöË¢´ÊîæÂú®Ë¥£‰ªªÈìæÁöÑÊúÄÂêé‰∏Ä‰∏™ÊâßË°åÔºåÂ¶ÇÊûúÈúÄË¶ÅËá™ÂÆö‰πâvavleÔºåÈúÄË¶ÅÊ∑ªÂä†ÈÖçÁΩÆÂà∞ <strong>server.xml</strong> ‰∏≠ÔºåÂπ∂‰∏îÊØè‰∏Ä‰∏™vavleÈÉΩ‰ºöÊåáÂêëÂêé‰∏Ä‰∏™valveÔºåÊúÄÁªàÂ∞ÜÁî±StandardXXXValveÂ§ÑÁêÜÔºå‰πãÂêéÂÜç‰º†ÈÄíÁªôÁõ∏ÂØπÂ∫îÁöÑÂ≠êÂÆπÂô®Ôºö <!-- raw HTML omitted --></p>
<p>StandardEngineValve.invoke()ÔºåÂ∞±ÂÉèÊàë‰ª¨‰πãÂâçÁöÑËØ¥ÁöÑÔºåÈªòËÆ§ÁöÑValve‰ºöÁªßÁª≠Ë∞ÉÁî®ÂØπÂ∫îÂ≠êÂÆπÂô®ÁöÑpipeline‰∏≠ÁöÑvavleÁªßÁª≠Â§ÑÁêÜËØ∑Ê±ÇÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">,</span> <span class="n">Response</span> <span class="n">response</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Select the Host to be used for this Request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Ë∞ÉÁî®Request#getHost()ÊñπÊ≥ïÊù•Ê†πÊçÆHTTPËØ∑Ê±ÇËé∑ÂèñÂØπÂ∫îÁöÑHost
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Host</span> <span class="n">host</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getHost</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span><span class="n">host</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// HTTP 0.9 or HTTP 1.0 request without a host when no default host
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// is defined.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// Don&#39;t overwrite an existing error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="o">(!</span><span class="n">response</span><span class="o">.</span><span class="na">isError</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">response</span><span class="o">.</span><span class="na">sendError</span><span class="o">(</span><span class="n">404</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">isAsyncSupported</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">request</span><span class="o">.</span><span class="na">setAsyncSupported</span><span class="o">(</span><span class="n">host</span><span class="o">.</span><span class="na">getPipeline</span><span class="o">().</span><span class="na">isAsyncSupported</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Ask this Host to process this request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">host</span><span class="o">.</span><span class="na">getPipeline</span><span class="o">().</span><span class="na">getFirst</span><span class="o">().</span><span class="na">invoke</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>Â∞±ËøôÊ†∑ÊåâÁÖßÈ°∫Â∫è‰∏ÄÁõ¥ÊâßË°å‰∏ãÂéªÔºöEngine-&gt;Host-&gt;Context-&gt;Wrapper: <!-- raw HTML omitted --></p>
<ol>
<li>Ê†πÊçÆHTTPËØ∑Ê±ÇË∞ÉÁî®RequestÁ±ª‰∏≠ÁöÑgetHost(), getContext(), getWrapper()ÊñπÊ≥ïÊù•Ëé∑ÂèñÂØπÂ∫îÁöÑÂ≠êÂÆπÂô®Ôºõ <!-- raw HTML omitted --></li>
<li>ÁÑ∂ÂêéÊâßË°åÂ≠êÂÆπÂô®‰∏≠ÁöÑPipleline-ValveË¥£‰ªªÈìæÔºåÁõ¥Âà∞ÊúÄÂêéWrapperValve#invoke()ÊñπÊ≥ïÔºõ <!-- raw HTML omitted --></li>
</ol>
<p><figure><img src="/ox-hugo/2022-10-24_21-12-28_screenshot.png"
         alt="Figure 14: Pipleline-ValveË¥£‰ªªÈìæ" width="700px"/><figcaption>
            <p><!-- raw HTML omitted -->Figure 14: <!-- raw HTML omitted -->Pipleline-ValveË¥£‰ªªÈìæ</p>
        </figcaption>
</figure>
 <!-- raw HTML omitted --></p>
<h3 id="tomcat-containerÂÆπÂô®Â§ÑÁêÜhttpËØ∑Ê±ÇÁöÑÁªàÁÇπ">Tomcat ContainerÂÆπÂô®Â§ÑÁêÜHTTPËØ∑Ê±ÇÁöÑÁªàÁÇπ</h3>
<p>Êàë‰ª¨Êù•ÁúãÊúÄÂêéÁöÑStandardWrappeValveÁöÑinvoke()ÊñπÊ≥ïÔºö <!-- raw HTML omitted --></p>
<ol>
<li>ÂàõÂª∫ServletÂÆû‰æãÔºõ <!-- raw HTML omitted --></li>
<li>ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑFilterChainÂÆû‰æãÔºàFilterChain‰πüÊòØ‰∏Ä‰∏™Ë¥£‰ªªÈìæÔºåÂ∞ÜÂØπ‰∫éËØ∑Ê±ÇÁöÑËøáÊª§Ë°å‰∏∫ÂàÜÊï£Âà∞‰∫ÜÂ§ö‰∏™Filter‰∏äÔºâÔºõ <!-- raw HTML omitted --></li>
<li>Ë∞ÉÁî®Êñ∞ÂàõÂª∫ÁöÑFilterChainÂÆû‰æãÁöÑdoFilter()ÊñπÊ≥ïÊù•ÁªßÁª≠Â§ÑÁêÜËØ∑Ê±ÇÔºõ <!-- raw HTML omitted --></li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">,</span> <span class="n">Response</span> <span class="n">response</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Initialize local variables we may need
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="n">StandardWrapper</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="o">(</span><span class="n">StandardWrapper</span><span class="o">)</span> <span class="n">getContainer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Servlet</span> <span class="n">servlet</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="o">(</span><span class="n">Context</span><span class="o">)</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">getParent</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Allocate a servlet instance to process this request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 1. ÂàÜÈÖç‰∏Ä‰∏™ServletÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(!</span><span class="n">unavailable</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">servlet</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">allocate</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Create the filter chain for this request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 2. ‰ΩøÁî®FactoryÂ∑•ÂéÇÁ±ªÂàõÂª∫‰∏Ä‰∏™filterChainÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ApplicationFilterChain</span> <span class="n">filterChain</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                <span class="n">ApplicationFilterFactory</span><span class="o">.</span><span class="na">createFilterChain</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">wrapper</span><span class="o">,</span> <span class="n">servlet</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Call the filter chain for this request
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// NOTE: This also calls the servlet&#39;s service() method
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Container</span> <span class="n">container</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">container</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">((</span><span class="n">servlet</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">filterChain</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// Swallow output if needed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getSwallowOutput</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">SystemLogHandler</span><span class="o">.</span><span class="na">startCapture</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">isAsyncDispatching</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">request</span><span class="o">.</span><span class="na">getAsyncContextInternal</span><span class="o">().</span><span class="na">doInternalDispatch</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">// 3. Ë∞ÉÁî®ÂàõÂª∫ÁöÑfilterChainÁöÑdoFilterÊñπÊ≥ïÊù•Â§ÑÁêÜËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getRequest</span><span class="o">(),</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">response</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">isAsyncDispatching</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">request</span><span class="o">.</span><span class="na">getAsyncContextInternal</span><span class="o">().</span><span class="na">doInternalDispatch</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// 3. Ë∞ÉÁî®ÂàõÂª∫ÁöÑfilterChainÁöÑdoFilterÊñπÊ≥ïÊù•Â§ÑÁêÜËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span>
</span></span><span class="line"><span class="cl">                            <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getRequest</span><span class="o">(),</span> <span class="n">response</span><span class="o">.</span><span class="na">getResponse</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>ApplicationFilterChainÊòØFilterChainÁöÑÂÆûÁé∞Á±ªÔºådoFilterÊñπÊ≥ïÂ∞ÜÁªßÁª≠Ë∞ÉÁî® <strong>ApplicationFilterChain</strong> ‰∏≠ÁöÑ <code>internalDoFilter()</code> ÊñπÊ≥ïÂ§ÑÁêÜËØ∑Ê±ÇÔºö <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span><span class="n">ServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">ServletResponse</span> <span class="n">response</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span> <span class="n">Globals</span><span class="o">.</span><span class="na">IS_SECURITY_ENABLED</span> <span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="n">ServletRequest</span> <span class="n">req</span> <span class="o">=</span> <span class="n">request</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="n">ServletResponse</span> <span class="n">res</span> <span class="o">=</span> <span class="n">response</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">AccessController</span><span class="o">.</span><span class="na">doPrivileged</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                    <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">PrivilegedExceptionAction</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                        <span class="kd">public</span> <span class="n">Void</span> <span class="nf">run</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                            <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">internalDoFilter</span><span class="o">(</span><span class="n">req</span><span class="o">,</span><span class="n">res</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">internalDoFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p><strong>ApplicationFilterChain.internalDoFilter()</strong>: <!-- raw HTML omitted --></p>
<ol>
<li>Ê†πÊçÆFilterConfigÊù•ÂàõÂª∫‰∏Ä‰∏™FilterÂÆû‰æãÔºõ <!-- raw HTML omitted -->
<ul>
<li>ËøôÊó∂ÂÄôÊàë‰ª¨Áªà‰∫éÁü•ÈÅì‰πãÂâçÂú®Âä†ËΩΩFilterÁöÑÊó∂ÂÄô‰∏∫‰ªÄ‰πàË¶Å‰øùÂ≠òFilterConfigs‰∫ÜÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÂ∞ÅË£ÖFilterÂØπË±°ÔºåÂπ∂‰øùÂ≠òÊõ¥Â§öÁöÑ‰ø°ÊÅØÂíåÂäüËÉΩÔºõ <!-- raw HTML omitted --></li>
</ul>
</li>
<li>Ë∞ÉÁî®Filter‰∏≠ÁöÑËøáÊª§ÊñπÊ≥ïÔºõ <!-- raw HTML omitted -->
<ul>
<li>ËøáÊª§Êìç‰ΩúÁªìÊùü‰πãÂêéÔºåÈúÄË¶ÅÂÜçÊ¨°Ë∞ÉÁî® <strong>ApplicationFilterChain#doFilter()</strong> Êù•ÊâßË°å‰∏ã‰∏Ä‰∏™FilterÁöÑdoFilter()Ôºõ <!-- raw HTML omitted --></li>
</ul>
</li>
<li>ÊúÄÂêéÂú®ÊâÄÊúâÁöÑFilterÁöÑËøáÊª§Êìç‰ΩúÈÉΩÁªìÊùüÂêéÔºåÊ≠£ÂºèË∞ÉÁî®ServletÁöÑservice()ÊñπÊ≥ïÊù•Â§ÑÁêÜËØ∑Ê±ÇÔºõ <!-- raw HTML omitted --></li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">internalDoFilter</span><span class="o">(</span><span class="n">ServletRequest</span> <span class="n">request</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                  <span class="n">ServletResponse</span> <span class="n">response</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Call the next filter if there is one
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ApplicationFilterConfig</span> <span class="n">filterConfig</span> <span class="o">=</span> <span class="n">filters</span><span class="o">[</span><span class="n">pos</span><span class="o">++];</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 1. Ê†πÊçÆFilterConfigÊù•Ëé∑ÂèñFilterÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">Filter</span> <span class="n">filter</span> <span class="o">=</span> <span class="n">filterConfig</span><span class="o">.</span><span class="na">getFilter</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="o">(</span> <span class="n">Globals</span><span class="o">.</span><span class="na">IS_SECURITY_ENABLED</span> <span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>      
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 2. Ë∞ÉÁî®Filter‰∏≠ÁöÑËøáÊª§ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">filter</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// We fell off the end of the chain -- call the servlet instance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Use potentially wrapped request from this point
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">((</span><span class="n">request</span> <span class="k">instanceof</span> <span class="n">HttpServletRequest</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">(</span><span class="n">response</span> <span class="k">instanceof</span> <span class="n">HttpServletResponse</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Globals</span><span class="o">.</span><span class="na">IS_SECURITY_ENABLED</span> <span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 3. ÊâÄÊúâÁöÑFilterÁöÑËøáÊª§Êìç‰ΩúÈÉΩÁªìÊùüÂêéÔºåÊ≠£ÂºèË∞ÉÁî®ServletÁöÑservice()ÊñπÊ≥ïÊù•Â§ÑÁêÜËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">servlet</span><span class="o">.</span><span class="na">service</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">     <span class="o">}</span>
</span></span></code></pre></div><h3 id="Â∞èÁªì">Â∞èÁªì</h3>
<p>TomcatÁöÑContainerÂÆπÂô®ÈÄöËøáPipeline-ValveË¥£‰ªªÈìæÊú∫Âà∂ÔºåÂØπ‰∫éHTTPËØ∑Ê±Ç‰∏≠‰∏çÂêå‰ø°ÊÅØÈÄêÊ∏êÈÄâÊã©ÂØπÂ∫îÁöÑÂ≠êÂÆπÂô®ÔºåÊúÄÁªàÂà∞ËææStandardWrapperValve‰∏≠Ôºõ <!-- raw HTML omitted --></p>
<p>Êé•ÁùÄÔºåStandardWrapperValve‰ºöÊØè‰∏™ËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÈÉΩÂàõÂª∫‰∏Ä‰∏™ApplicaitonFilterChainËøáÊª§ÈìæÔºåÂπ∂Ê†πÊçÆFilterConfig‰∏≠Â∞ÅË£ÖÁöÑFilterËøõË°ådoFilterËøáÊª§Êìç‰ΩúÔºåÊâÄÊúâÂÆö‰πâÁöÑFilterÈÉΩÂÆåÊàêËøáÊª§Êìç‰Ωú‰πãÂêéÔºåÊâßË°åWrapperÊâÄÂÆö‰πâServletÁöÑservice()ÊñπÊ≥ïÔºåÂÆåÊàêÂØπ‰∫éHTTPËØ∑Ê±ÇÁöÑÂ§ÑÁêÜ„ÄÇ <!-- raw HTML omitted --></p>
<h2 id="ÂÜôÂú®ÊúÄÂêé">ÂÜôÂú®ÊúÄÂêé</h2>
<p>ÂæàÈïøÁöÑ‰∏ÄÁØáÊñáÁ´†ÔºåÊàñËÄÖËØ¥Ëøô‰∏™ÈïøÂ∫¶Â∑≤Áªè‰∏çÈÖçÂè´ÂÅöÊñáÁ´†‰∫ÜÔºà‰∏™‰∫∫ÊÑüËßâÊñáÁ´†ËøòÊòØÂ∫îËØ•Êõ¥‰∏∫ÁÆÄÊ¥ÅÂπ≤ÁªÉ‰∏Ä‰∫õÔºâÔºåÊõ¥ÂÉèÊòØ‰∏ÄÁØáÂ≠¶‰π†Á¨îËÆ∞ÔºåËøô‰πüÂØºËá¥‰∫Ü‰∏ÄÂºÄÂßãÁöÑÁõÆÊ†áÂπ∂‰∏çÊòéÁ°ÆÔºå‰∏çÁü•ÈÅìËøôÊ†∑‰∏ÄÁØáÂÜÖÂÆπÈúÄË¶ÅÊîæÂ§öÂ∞ë‰∏úË•øËøõÊù•ÔºåÂæàÂ§öÁü•ËØÜÂ∫îËØ•Â≠¶‰π†Âà∞‰ªÄ‰πàÁ®ãÂ∫¶ÔºåËøô‰πüÊûÅÂ§ßÂú∞ÊâìÂáª‰∫ÜÊïàÁéáÔºåÂ∫îËØ•Âê∏ÂèñÊïôËÆ≠ÔºåÁ≤æÁÆÄÊØèÁØáÊñáÁ´†ÔºåËøôÊ†∑‰πüÂèØ‰ª•ÂàÜÊâπÊ¨°ÊèêÈ´òÊàêÂ∞±ÊÑü„ÄÇ <!-- raw HTML omitted --></p>
<p>Â¶ÇÊûúËØªËÄÖÂØπ‰∫éÂÜÖÂÆπÊúâ‰ªª‰ΩïÁöÑÁñëÈóÆÊàñËÄÖÂØπ‰∫éÂÜô‰ΩúÊúâ‰ªª‰ΩïÁöÑÊÑèËßÅÔºåËØ∑ÊÇ®Âä°ÂøÖÈÄöËøáÈÇÆ‰ª∂ÂëäËØâÊàëÔºåÊèêÂâçÊÑüË∞¢ÔºÅ <!-- raw HTML omitted --></p>
<h2 id="reference">Reference</h2>
<blockquote>
<p><a class="link" href="https://www.jianshu.com/p/1a2d2f868143"  target="_blank" rel="noopener"
    >Ê∑±ÂÖ•ÁêÜËß£TomcatÔºàÂÖ´ÔºâContainer</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://goodapple.top/archives/1359"  target="_blank" rel="noopener"
    >JavaÂÆâÂÖ®Â≠¶‰π†‚Äî‚ÄîTomcatÊû∂ÊûÑÊµÖÊûê</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html"  target="_blank" rel="noopener"
    >Understanding Virtual Host Concept in Tomcat</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://tomcat.apache.org/tomcat-10.0-doc/architecture/overview.html"  target="_blank" rel="noopener"
    >Apache Tomcat 10 Architecture</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.cnblogs.com/kismetv/p/7228274.html"  target="_blank" rel="noopener"
    >ËØ¶Ëß£Tomcat ÈÖçÁΩÆÊñá‰ª∂server.xml</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="http://www.shouhuola.com/q-36247.html"  target="_blank" rel="noopener"
    >‰ªÄ‰πàÊòØÈùôÊÄÅËµÑÊ∫êÔºå‰ªÄ‰πàÊòØÂä®ÊÄÅËµÑÊ∫ê</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.stackpath.com/edge-academy/what-is-static-content/"  target="_blank" rel="noopener"
    >What is Static Content?</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.techwalla.com/articles/what-is-the-ajp-protocol"  target="_blank" rel="noopener"
    >What Is the AJP Protocol?</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://en.wikipedia.org/wiki/Apache_JServ_Protocol"  target="_blank" rel="noopener"
    >Apache JServ Protocol</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://stackoverflow.com/questions/21757694/what-is-ajp-protocol-used-for"  target="_blank" rel="noopener"
    >What is AJP protocol used for?</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.jianshu.com/p/1a2d2f868143"  target="_blank" rel="noopener"
    >Ê∑±ÂÖ•ÁêÜËß£TomcatÔºàÂÖ´ÔºâContainer</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.runoob.com/w3cnote/facade-pattern-3.html"  target="_blank" rel="noopener"
    >JAVAËÆæËÆ°Ê®°Âºè‰πãÈó®Èù¢Ê®°ÂºèÔºàÂ§ñËßÇÊ®°ÂºèÔºâ</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.runoob.com/design-pattern/chain-of-responsibility-pattern.html"  target="_blank" rel="noopener"
    >Ë¥£‰ªªÈìæÊ®°ÂºèÔºàËèúÈ∏üÊïôÁ®ãÔºâ</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="http://t.zoukankan.com/bolang100-p-6041426.html"  target="_blank" rel="noopener"
    >tomcatÊû∂ÊûÑÂàÜÊûê(valveÊú∫Âà∂)</a> <!-- raw HTML omitted --></p>
<p><a class="link" href="https://www.anquanke.com/post/id/266240"  target="_blank" rel="noopener"
    >„ÄêÊäÄÊúØÂàÜ‰∫´„ÄëTomcat ÂÜÖÂ≠òÈ©¨ÊäÄÊúØÂàÜÊûêÔºà‰∏ÄÔºâ‚Äî‚Äî FilterÂûã</a>  <!-- raw HTML omitted --></p>
</blockquote>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/tomcat/">tomcat</a>
        
            <a href="/tags/servlet/">servlet</a>
        
            <a href="/tags/javaee/">JavaEE</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on Nov 01, 2022 18:17 CST
        </span>
    </section></footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">Related contents</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/how_browsers_work/">
        
        

        <div class="article-details">
            <h2 class="article-title">ÊµèËßàÂô®ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºü</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/posts/uri_url_urn/">
        
        

        <div class="article-details">
            <h2 class="article-title">URI &amp; URL &amp; URN ÁöÑÂÖ≥Á≥ª</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "medicwrf" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy;
        
        2022 Under The Ginkgo
    </section>

    <section class="powerby">
        
            Cogito, ergo sum <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    <section class="powerby">
      <span id="busuanzi_container_site_pv" style='display:none'>
        Viwe <span id="busuanzi_value_site_pv"></span> times
      </span>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#ÂÜôÂú®ÂâçÈù¢">ÂÜôÂú®ÂâçÈù¢</a></li>
    <li><a href="#tomcatÂü∫Á°ÄÊ°ÜÊû∂">TomcatÂü∫Á°ÄÊ°ÜÊû∂</a></li>
    <li><a href="#‰ªétomcatÈÖçÁΩÆÊñá‰ª∂server-dot-xml‰∫ÜËß£tomcat">‰ªéTomcatÈÖçÁΩÆÊñá‰ª∂server.xml‰∫ÜËß£Tomcat</a></li>
    <li><a href="#server">Server</a></li>
    <li><a href="#service">Service</a></li>
    <li><a href="#connector">Connector</a></li>
    <li><a href="#container">Container</a>
      <ul>
        <li><a href="#engine‰∏éhost">Engine‰∏éHost</a></li>
        <li><a href="#context">Context</a></li>
        <li><a href="#wrapper">Wrapper</a></li>
      </ul>
    </li>
    <li><a href="#tomcat‰∏≠ÁöÑ‰∏âÁßçcontextËæ®Êûê">Tomcat‰∏≠ÁöÑ‰∏âÁßçContextËæ®Êûê</a></li>
    <li><a href="#tomcatÂ¶Ç‰ΩïÂêØÂä®‰∏âÂ§ßÁªÑ‰ª∂">TomcatÂ¶Ç‰ΩïÂêØÂä®‰∏âÂ§ßÁªÑ‰ª∂</a>
      <ul>
        <li><a href="#contextconfig-configurecontext-‰∏é-standardcontext-startinternal">ContextConfig#configureContext() ‰∏é StandardContext#startInternal()</a></li>
        <li><a href="#listener">Listener</a>
          <ul>
            <li><a href="#Âä†ËΩΩlistenerÈÖçÁΩÆ">Âä†ËΩΩListenerÈÖçÁΩÆ</a></li>
            <li><a href="#ÂàùÂßãÂåñÂíåÂä†ËΩΩlistener">ÂàùÂßãÂåñÂíåÂä†ËΩΩListener</a></li>
          </ul>
        </li>
        <li><a href="#filter">Filter</a>
          <ul>
            <li><a href="#Âä†ËΩΩfilterÁõ∏ÂÖ≥ÈÖçÁΩÆ">Âä†ËΩΩFilterÁõ∏ÂÖ≥ÈÖçÁΩÆ</a></li>
            <li><a href="#ÂàùÂßãÂåñÂíåÂä†ËΩΩfilter">ÂàùÂßãÂåñÂíåÂä†ËΩΩFilter</a></li>
          </ul>
        </li>
        <li><a href="#servlet">Servlet</a>
          <ul>
            <li><a href="#Âä†ËΩΩservletÁõ∏ÂÖ≥ÈÖçÁΩÆ">Âä†ËΩΩServletÁõ∏ÂÖ≥ÈÖçÁΩÆ</a></li>
            <li><a href="#ÂàùÂßãÂåñÂíåÂä†ËΩΩservlet">ÂàùÂßãÂåñÂíåÂä†ËΩΩServlet</a></li>
          </ul>
        </li>
        <li><a href="#Â∞èÁªì">Â∞èÁªì</a></li>
      </ul>
    </li>
    <li><a href="#tomcatÂíåservletÂ§ÑÁêÜhttpËØ∑Ê±Ç">TomcatÂíåServletÂ§ÑÁêÜHTTPËØ∑Ê±Ç</a>
      <ul>
        <li><a href="#pipeline-valveË¥£‰ªªÈìæ">Pipeline-ValveË¥£‰ªªÈìæ</a></li>
        <li><a href="#tomcat-containerÂÆπÂô®Â§ÑÁêÜhttpËØ∑Ê±ÇÁöÑÁªàÁÇπ">Tomcat ContainerÂÆπÂô®Â§ÑÁêÜHTTPËØ∑Ê±ÇÁöÑÁªàÁÇπ</a></li>
        <li><a href="#Â∞èÁªì">Â∞èÁªì</a></li>
      </ul>
    </li>
    <li><a href="#ÂÜôÂú®ÊúÄÂêé">ÂÜôÂú®ÊúÄÂêé</a></li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
